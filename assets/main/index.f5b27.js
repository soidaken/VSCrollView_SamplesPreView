System.register("chunks:///_virtual/FPSCounter.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,n,r,a,o,s,l,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,s=e.Label,l=e.gfx,u=e.Component}],execute:function(){var p,f,c,h,P,_;a._RF.push({},"74f44JdvmhGFq+DSUPY/lXT","FPSCounter",void 0);var d=o.ccclass,A=o.property,I=o.requireComponent;e("FPSCounter",(p=d("FPSCounter"),f=I(s),c=A({tooltip:"æ›´æ–° FPS æ˜¾ç¤ºçš„æ—¶é—´é—´éš”ï¼ˆç§’ï¼‰"}),p(h=f((_=t((P=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,n(t,"updateInterval",_,r(t)),t._label=null,t._frameCount=0,t._elapsedTime=0,t._fps=0,t}i(t,e);var a=t.prototype;return a.onLoad=function(){this._label=this.getComponent(s)},a.update=function(e){if(this._frameCount++,this._elapsedTime+=e,this._elapsedTime>=this.updateInterval){if(this._fps=this._frameCount/this._elapsedTime,this._label){var t=l.deviceManager.gfxDevice;this._label.string="FPS: "+this._fps.toFixed(1)+"\nDC:"+t.numDrawCalls+"\nTRIS:"+t.numTris+"\nRENDER:"+(t.gfxAPI===l.API.WEBGL?"WebGL":t.gfxAPI===l.API.WEBGL2?"WebGL2":t.gfxAPI===l.API.GLES2?"GLES2":t.gfxAPI===l.API.GLES3?"GLES3":t.gfxAPI===l.API.VULKAN?"VULKAN":t.gfxAPI===l.API.METAL?"METAL":"UNKNOWN/NOMATCH")}this._frameCount=0,this._elapsedTime-=this.updateInterval}},t}(u)).prototype,"updateInterval",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.25}}),h=P))||h)||h));a._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./VScrollView-001.ts","./VScrollView.ts","./VScrollViewItem.ts","./FPSCounter.ts","./UIButton.ts","./UIPersist.ts","./scene0.ts","./scene1.ts","./scene2.ts","./scene4.ts","./scene5.ts","./scene6.ts","./scene7.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/scene0.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIButton.ts","./UIPersist.ts"],(function(e){var t,n,o,r,i,a,c,s,u,l,p,f,d,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized,i=e.createForOfIteratorHelperLoose},function(e){a=e.cclegacy,c=e._decorator,s=e.Node,u=e.game,l=e.Label,p=e.director,f=e.Component},function(e){d=e.default},function(e){b=e.UIPersist}],execute:function(){var v,g,y,h,_;a._RF.push({},"fbc896aeyxHnpb0x+WgQNy2","scene0",void 0);var m=c.ccclass,P=c.property;e("scene0",(v=m("scene0"),g=P([s]),v((_=t((h=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,o(t,"btn_nodes",_,r(t)),t}n(t,e);var a=t.prototype;return a.onLoad=function(){u.frameRate=120},a.start=function(){b.back.active=!1;for(var e,t=i(this.btn_nodes);!(e=t()).done;){var n=e.value;d.onClicked(n,(function(e){b.back.active=!0;var t=e.node.children[0].getComponent(l).string;p.loadScene(t)})),n.getComponent(d).b_stopPropagation=!1}},a.onEnable=function(){},a._getBackNode=function(){p.addPersistRootNode},t}(f)).prototype,"btn_nodes",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=h))||y));a._RF.pop()}}}));

System.register("chunks:///_virtual/scene1.ts",["./rollupPluginModLoBabelHelpers.js","cc","./VScrollView.ts","./UIButton.ts"],(function(t){var e,n,i,a,o,r,l,s,d,c,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,l=t.game,s=t.Label,d=t.Component},function(t){c=t.VirtualScrollView},function(t){f=t.default}],execute:function(){var h,u,p,g,m;o._RF.push({},"8a3d0Z3roVHcLzQtl4/87gi","scene1",void 0);var C=r.ccclass,v=r.property;t("scene1",(h=C("scene1"),u=v(c),h((m=e((g=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,i(e,"vlist",m,a(e)),e.data=[],e.renderOptOnOff=!1,e}return n(e,t),e.prototype.onLoad=function(){var t=this;l.frameRate=120;for(var e=0;e<50;e++)this.data.push({data1:"é‡è¦é€šçŸ¥"+(e+1),data2:"2025.10."+(1+e)});this.vlist&&(this.vlist.renderItemFn=function(e,n){var i=e.getChildByName("title").getComponent(s),a=e.getChildByName("time").getComponent(s);i.string=t.data[n].data1,a.string=t.data[n].data2;var o=e.getChildByName("btn");f.onClicked(o,(function(e){t.node.getChildByName("tip").getComponent(s).string="ä½ ç‚¹å‡»äº†ç¬¬"+(n+1)+"é¡¹,å†…å®¹:"+t.data[n].data1}))},this.vlist.onItemClickFn=function(e,n){t.node.getChildByName("tip").getComponent(s).string="ä½ ç‚¹å‡»äº†ç¬¬"+(n+1)+"é¡¹,å†…å®¹:"+t.data[n].data1},this.vlist.refreshList(this.data)),f.onClicked(this.node.getChildByName("btn1"),(function(e){t.data[1].data1="ã€å·²ä¿®æ”¹ã€‘é‡è¦é€šçŸ¥2",t.vlist.refreshIndex(1)})),f.onClicked(this.node.getChildByName("btn2"),(function(e){t.vlist.scrollToBottom(!0)})),f.onClicked(this.node.getChildByName("btn3"),(function(e){t.vlist.scrollToIndex(9,!0)})),f.onClicked(this.node.getChildByName("btn4"),(function(e){t.renderOptOnOff=!t.renderOptOnOff,t.node.getChildByName("tip").getComponent(s).string="åˆ†å±‚ä¼˜åŒ–:"+(t.renderOptOnOff?"å¼€å¯":"å…³é—­"),t.vlist.onOffSortLayer(t.renderOptOnOff)})),f.onClicked(this.node.getChildByName("btn5"),(function(e){t.data.push({data1:"æ–°å¢çš„æ•°æ® "+(t.data.length+1),data2:"2025.10."+(t.data.length+1)}),t.vlist.flashToBottom(),t.vlist.refreshList(t.data),t.vlist.scrollToBottom(!0)}))},e}(d)).prototype,"vlist",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=g))||p));o._RF.pop()}}}));

System.register("chunks:///_virtual/scene2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./VScrollView.ts","./UIButton.ts"],(function(t){var e,n,i,a,o,r,l,s,d,c,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,l=t.game,s=t.Label,d=t.Component},function(t){c=t.VirtualScrollView},function(t){f=t.default}],execute:function(){var p,h,u,g,y;o._RF.push({},"3b8f4aFPcZAyZResgK0XyEC","scene2",void 0);var m=r.ccclass,C=r.property;t("scene2",(p=m("scene2"),h=C(c),p((y=e((g=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,i(e,"vlist",y,a(e)),e.data=[],e.renderOptOnOff=!0,e}return n(e,t),e.prototype.onLoad=function(){var t=this;l.frameRate=120;for(var e=0;e<40;e++)this.data.push({data1:"ç¬¬"+(e+1)+"æ¡æ•°æ®",data2:"2025.10."+(1+e),type:e%3+1});this.vlist&&(this.vlist.getItemTypeIndexFn=function(e){return t.data[e].type-1},this.vlist.renderItemFn=function(e,n){var i=t.data[n];if(1===i.type){var a=e.getChildByName("title").getComponent(s),o=e.getChildByName("time").getComponent(s);a.string="ç±»å‹1:"+t.data[n].data1,o.string=t.data[n].data2}else if(2===i.type){e.getChildByName("title").getComponent(s).string="ç±»å‹2:"+t.data[n].data1}else if(3===i.type){e.getChildByName("msg").getComponent(s).string="ç±»å‹3ï¼š"+t.data[n].data1}},this.vlist.onItemClickFn=function(e,n){t.node.getChildByName("tip").getComponent(s).string="ä½ ç‚¹å‡»äº†ç¬¬"+(n+1)+"é¡¹,å†…å®¹:"+t.data[n].data1},this.vlist.refreshList(this.data)),f.onClicked(this.node.getChildByName("btn1"),(function(e){t.data[1].data1="ã€å·²ä¿®æ”¹ã€‘é‡è¦é€šçŸ¥2",t.vlist.refreshIndex(1)})),f.onClicked(this.node.getChildByName("btn2"),(function(e){t.vlist.scrollToBottom(!0)})),f.onClicked(this.node.getChildByName("btn3"),(function(e){t.vlist.scrollToIndex(9,!0)})),f.onClicked(this.node.getChildByName("btn4"),(function(e){t.renderOptOnOff=!t.renderOptOnOff,t.node.getChildByName("tip").getComponent(s).string="åˆ†å±‚ä¼˜åŒ–:"+(t.renderOptOnOff?"å¼€å¯":"å…³é—­"),t.vlist.onOffSortLayer(t.renderOptOnOff)})),f.onClicked(this.node.getChildByName("btn5"),(function(e){t.data.push({data1:"æ–°å¢æ•°æ®: ç¬¬"+(t.data.length+1)+"æ¡æ•°æ®",data2:"2025.10."+(t.data.length+1),type:t.data.length%3+1}),t.vlist.refreshList(t.data),t.vlist.scrollToBottom(!0)}))},e}(d)).prototype,"vlist",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=g))||u));o._RF.pop()}}}));

System.register("chunks:///_virtual/scene4.ts",["./rollupPluginModLoBabelHelpers.js","cc","./VScrollView.ts","./UIButton.ts"],(function(t){var e,n,i,o,r,a,s,l,c,d,f,p,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,s=t.SpriteFrame,l=t.game,c=t.Label,d=t.Sprite,f=t.Component},function(t){p=t.VirtualScrollView},function(t){h=t.default}],execute:function(){var u,g,m,v,y,C,O;r._RF.push({},"e478994D9xH8JEhuOUOSkpw","scene4",void 0);var B=a.ccclass,b=a.property;t("scene4",(u=B("scene4"),g=b([s]),m=b(p),u((C=e((y=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(e,"spfs",C,o(e)),i(e,"vlist",O,o(e)),e.data=[],e.renderOptOnOff=!0,e}return n(e,t),e.prototype.onLoad=function(){var t=this;l.frameRate=120;for(var e=0;e<50;e++)this.data.push({data1:"ç¬¬ "+(e+1)+" é¡¹",icon:e%this.spfs.length});this.vlist&&(this.vlist.renderItemFn=function(e,n){e.getChildByName("title").getComponent(c).string=t.data[n].data1,e.getChildByName("icon").getComponent(d).spriteFrame=t.spfs[t.data[n].icon]},this.vlist.onItemClickFn=function(e,n){t.node.getChildByName("tip").getComponent(c).string="ä½ ç‚¹å‡»äº†ç¬¬"+(n+1)+"é¡¹,å†…å®¹:"+t.data[n].data1},this.vlist.refreshList(this.data)),h.onClicked(this.node.getChildByName("btn1"),(function(e){t.data[1].data1="ã€å·²ä¿®æ”¹ã€‘é‡è¦é€šçŸ¥2",t.vlist.refreshIndex(1)})),h.onClicked(this.node.getChildByName("btn2"),(function(e){t.vlist.scrollToBottom(!0)})),h.onClicked(this.node.getChildByName("btn3"),(function(e){t.vlist.scrollToIndex(9,!0)})),h.onClicked(this.node.getChildByName("btn4"),(function(e){t.renderOptOnOff=!t.renderOptOnOff,t.node.getChildByName("tip").getComponent(c).string="åˆ†å±‚ä¼˜åŒ–:"+(t.renderOptOnOff?"å¼€å¯":"å…³é—­"),t.vlist.onOffSortLayer(t.renderOptOnOff)})),h.onClicked(this.node.getChildByName("btn5"),(function(e){t.data.push({data1:"ç¬¬ "+(t.data.length+1)+" é¡¹",icon:t.data.length%t.spfs.length}),t.vlist.flashToBottom(),t.vlist.refreshList(t.data),t.vlist.scrollToBottom(!0)}))},e}(f)).prototype,"spfs",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=e(y.prototype,"vlist",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=y))||v));r._RF.pop()}}}));

System.register("chunks:///_virtual/scene5.ts",["./rollupPluginModLoBabelHelpers.js","cc","./VScrollView.ts","./UIButton.ts"],(function(t){var e,o,r,n,a,i,l,s,c,f,h,d,g,u,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){a=t.cclegacy,i=t._decorator,l=t.game,s=t.Label,c=t.RichText,f=t.UITransform,h=t.tween,d=t.Vec3,g=t.Component},function(t){u=t.VirtualScrollView},function(t){m=t.default}],execute:function(){var p,v,y,C,M;a._RF.push({},"59ba128+ZdIk6c4G6SmmGpN","scene5",void 0);var b=i.ccclass,O=i.property;t("scene5",(p=b("scene5"),v=O(u),p((M=e((C=function(t){function e(){for(var e,o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a))||this,r(e,"vlist",M,n(e)),e.chatData=[],e.renderOptOnOff=!0,e}o(e,t);var a=e.prototype;return a.onLoad=function(){var t=this;l.frameRate=120;for(var e=0;e<2;e++){var o=this.generateRandomMessage(1===e);this.chatData.push({player:e%2==0?1:2,message:o,calculatedHeight:0})}this.vlist&&(this.vlist.getItemTypeIndexFn=function(e){return 1===t.chatData[e].player?0:1},this.vlist.renderItemFn=function(e,o){var r=t.chatData[o],n=e.getChildByName("msg").getComponent(s);n&&(n.string="ç¬¬"+(o+1)+"æ¡æ¶ˆæ¯: "+r.message);var a=e.getChildByName("msg").getComponent(c);a&&(a.string="ç¬¬"+(o+1)+"æ¡æ¶ˆæ¯: "+r.message),n&&n.updateRenderData();var i=(n?n.node:a.node).getComponent(f),l=e.getChildByName("bg").getComponent(f);l.height=i.height+40,e.getComponent(f).height=l.height},this.vlist.playItemAppearAnimationFn=function(t,e){t.setScale(0,0),h(t).to(.15,{scale:new d(1,1,1)},{easing:"smooth"}).start()},this.vlist.refreshList(this.chatData)),this.vlist.onItemClickFn=function(e,o){t.node.getChildByName("tip").getComponent(s).string="ä½ ç‚¹å‡»äº†ç¬¬"+(o+1)+"é¡¹"},m.onClicked(this.node.getChildByName("btn1"),(function(e){t.addNewMessage(1)})),m.onClicked(this.node.getChildByName("btn2"),(function(e){t.addNewMessage(2)})),m.onClicked(this.node.getChildByName("btn3"),(function(e){t.vlist.scrollToIndex(9,!0)})),m.onClicked(this.node.getChildByName("btn4"),(function(e){t.renderOptOnOff=!t.renderOptOnOff,t.node.getChildByName("tip").getComponent(s).string="åˆ†å±‚ä¼˜åŒ–:"+(t.renderOptOnOff?"å¼€å¯":"å…³é—­"),t.vlist.onOffSortLayer(t.renderOptOnOff)}))},a.addNewMessage=function(t,e){this.chatData.push({player:t,message:this.generateRandomMessage(2===t),calculatedHeight:0}),this.vlist.flashToBottom(),this.vlist.refreshList(this.chatData.length),this.vlist.scrollToBottom(!0)},a.updateMessage=function(t,e){this.chatData[t].message=e,this.chatData[t].calculatedHeight=0,this.vlist.refreshIndex(t)},a.generateRandomMessage=function(t){if(void 0===t&&(t=!1),t){var e=["<color=#ff0000>çº¢è‰²</color>æ–‡å­—æµ‹è¯•","<color=#00ff00>ç»¿è‰²</color>åŠ ç²—<b>ç²—ä½“æ–‡æœ¬</b>","<color=#0000ff>è“è‰²</color>æ–œä½“<i>æ–œä½“æ–‡æœ¬</i><color=#ffff00>é»„è‰²èƒŒæ™¯</color>æ–‡å­—<color=#00ff00>ç»¿è‰²æ–‡å­—</color>","<color=#ff00ff>ç´«è‰²</color>ä¸‹åˆ’çº¿<u>ä¸‹åˆ’çº¿æ–‡æœ¬</u><color=#ffff00>é»„è‰²èƒŒæ™¯</color>æ–‡å­—<color=#00ff00>ç»¿è‰²æ–‡å­—</color>","<b>ç²—ä½“</b><i>æ–œä½“</i><u>ä¸‹åˆ’çº¿</u>æ··åˆæ ·å¼","<color=#ffa500>æ©™è‰²</color>å­—ä½“å¤§å°<size=30>å¤§å·å­—</size><color=#ffff00>é»„è‰²èƒŒæ™¯</color>æ–‡å­—<color=#00ff00>ç»¿è‰²æ–‡å­—</color>","<color=#00ffff>é’è‰²</color>ä»Šå¤©å¤©æ°”ä¸é”™<color=#ff0000>å‡ºå»èµ°èµ°</color><color=#ffff00>é»„è‰²èƒŒæ™¯</color>æ–‡å­—<color=#00ff00>ç»¿è‰²æ–‡å­—</color>","<b>é‡è¦é€šçŸ¥:</b> <color=#ff0000>ç³»ç»Ÿå°†åœ¨ä»Šæ™šç»´æŠ¤</color>","<color=#ffff00>é»„è‰²èƒŒæ™¯</color>æ–‡å­—<color=#00ff00>ç»¿è‰²æ–‡å­—</color>","<size=40><color=#ff0000>å¤§</color></size><size=20><color=#00ff00>å°</color></size>å­—ä½“æ··åˆ"];return e[Math.floor(Math.random()*e.length)]}var o=["å¥½çš„","æ”¶åˆ°","ğŸ‘Œ","æ²¡é—®é¢˜","çŸ¥é“äº†","å“ˆå“ˆå“ˆ","ğŸ˜‚ğŸ˜‚ğŸ˜‚","åœ¨å—ï¼Ÿ","æ™šå®‰","æ—©ä¸Šå¥½"],r=["ä»Šå¤©å¤©æ°”ä¸é”™ï¼Œå‡ºå»èµ°èµ°å§","åˆšæ‰çœ‹åˆ°ä¸€ä¸ªå¾ˆæœ‰æ„æ€çš„è§†é¢‘","å‘¨æœ«ä¸€èµ·å»çœ‹ç”µå½±æ€ä¹ˆæ ·ï¼Ÿ","è¿™ä¸ªåŠŸèƒ½ç»ˆäºåšå®Œäº†","ä»Šå¤©åŠ ç­åˆ°å¾ˆæ™šï¼Œç´¯æ­»äº†","æ˜å¤©æ—©ä¸Šè®°å¾—å¸¦ä¼","åˆé¤æƒ³åƒä»€ä¹ˆï¼Ÿ","è¿™ä¸ªbugä¿®äº†ä¸€ä¸‹åˆ","åˆšæ‰åœ¨åœ°é“ä¸Šé‡åˆ°è€åŒå­¦äº†","ä»Šå¤©å¿ƒæƒ…è¶…çº§å¥½"],n=["ä½ å¥½ï¼Œä»Šå¤©æ·±åœ³çš„å¤©æ°”çœŸçš„å¾ˆèˆ’æœï¼Œé˜³å…‰æ˜åªšï¼Œå¾®é£æ‹‚é¢ï¼Œç‰¹åˆ«é€‚åˆå‡ºå»èµ°èµ°ã€‚ä¸‹åˆæœ‰æ—¶é—´çš„è¯ï¼Œè¦ä¸è¦ä¸€èµ·å»å…¬å›­æ•£æ•£æ­¥ï¼Ÿ","åˆšæ‰è·¯è¿‡ä¸€å®¶æ–°å¼€çš„å’–å•¡åº—ï¼Œè£…ä¿®ç‰¹åˆ«æœ‰æ ¼è°ƒï¼Œå’–å•¡çš„å‘³é“ä¹Ÿè¶…çº§æ£’ã€‚ä»–ä»¬å®¶è¿˜æœ‰å¾ˆå¤šç‰¹è‰²ç”œç‚¹ï¼Œæ”¹å¤©å¸¦ä½ å»å°å°ï¼","ä»Šå¤©é‡åˆ°äº†ä¸€ä»¶ç‰¹åˆ«æœ‰è¶£çš„äº‹æƒ…ï¼Œæƒ³å’Œä½ åˆ†äº«ä¸€ä¸‹ã€‚æ—©ä¸Šåœ¨åœ°é“ä¸Šçœ‹åˆ°ä¸€ä¸ªå°æœ‹å‹ï¼Œè¶…çº§å¯çˆ±ï¼Œä¸€ç›´åœ¨å’Œå¦ˆå¦ˆèŠå¤©ï¼Œè¯´çš„è¯ç‰¹åˆ«æç¬‘ã€‚","æœ€è¿‘åœ¨çœ‹ä¸€æœ¬å¾ˆæœ‰æ„æ€çš„ä¹¦ï¼Œè®²çš„æ˜¯å…³äºæ—¶é—´ç®¡ç†çš„ï¼Œé‡Œé¢æœ‰å¾ˆå¤šå®ç”¨çš„æ–¹æ³•ã€‚çœ‹å®Œä¹‹åæ„Ÿè§‰å¯¹è‡ªå·±çš„å·¥ä½œæ•ˆç‡æå‡å¾ˆæœ‰å¸®åŠ©ï¼Œæ¨èç»™ä½ ï¼","è¿™ä¸ªé¡¹ç›®ä»ç«‹é¡¹åˆ°ç°åœ¨å·²ç»å¿«ä¸‰ä¸ªæœˆäº†ï¼Œä¸­é—´é‡åˆ°äº†å¾ˆå¤šå›°éš¾ï¼Œä½†æ˜¯å›¢é˜Ÿä¸€èµ·åŠªåŠ›ï¼Œç»ˆäºåœ¨ä»Šå¤©å®Œæˆäº†ã€‚æ„Ÿè§‰ç‰¹åˆ«æœ‰æˆå°±æ„Ÿï¼Œå¤§å®¶ä¹Ÿéƒ½å¾ˆå¼€å¿ƒï¼"],a=["ğŸ˜„","ğŸ˜Š","ğŸ˜‚","ğŸ‰","ğŸ‘","ğŸ’ª","ğŸŒˆ","â˜€ï¸","ğŸŒŸ","â¤ï¸","ğŸ”¥","âœ¨"],i=Math.random(),l="";if(i<.3)l=o[Math.floor(Math.random()*o.length)];else if(i<.7){l=r[Math.floor(Math.random()*r.length)];for(var s=Math.floor(2*Math.random())+1,c=0;c<s;c++)l+=a[Math.floor(Math.random()*a.length)]}else l=n[Math.floor(Math.random()*n.length)];return l},e}(g)).prototype,"vlist",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=C))||y));a._RF.pop()}}}));

System.register("chunks:///_virtual/scene6.ts",["./rollupPluginModLoBabelHelpers.js","cc","./VScrollView.ts","./UIButton.ts"],(function(t){var e,n,i,a,o,r,l,s,d,c,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,l=t.game,s=t.Label,d=t.Component},function(t){c=t.VirtualScrollView},function(t){f=t.default}],execute:function(){var h,u,p,g,m;o._RF.push({},"c16e3KsSjZL2KN0FFk7RZcs","scene6",void 0);var C=r.ccclass,v=r.property;t("scene6",(h=C("scene6"),u=v(c),h((m=e((g=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,i(e,"vlist",m,a(e)),e.data=[],e.renderOptOnOff=!1,e}return n(e,t),e.prototype.onLoad=function(){var t=this;l.frameRate=120;for(var e=0;e<20;e++)this.data.push({data1:"é‡è¦é€šçŸ¥"+(e+1),data2:"2025.10."+(1+e)});this.vlist&&(this.vlist.renderItemFn=function(e,n){var i=e.getChildByName("title").getComponent(s),a=e.getChildByName("time").getComponent(s);i.string=t.data[n].data1,a.string=t.data[n].data2;var o=e.getChildByName("btn");f.onClicked(o,(function(e){t.node.getChildByName("tip").getComponent(s).string="ä½ ç‚¹å‡»äº†ç¬¬"+(n+1)+"é¡¹,å†…å®¹:"+t.data[n].data1}))},this.vlist.onItemClickFn=function(e,n){t.node.getChildByName("tip").getComponent(s).string="ä½ ç‚¹å‡»äº†ç¬¬"+(n+1)+"é¡¹,å†…å®¹:"+t.data[n].data1},this.vlist.refreshList(this.data)),f.onClicked(this.node.getChildByName("btn1"),(function(e){t.data[1].data1="ã€å·²ä¿®æ”¹ã€‘é‡è¦é€šçŸ¥2",t.vlist.refreshIndex(1)})),f.onClicked(this.node.getChildByName("btn2"),(function(e){t.vlist.scrollToBottom(!0)})),f.onClicked(this.node.getChildByName("btn3"),(function(e){t.vlist.scrollToIndex(9,!0)})),f.onClicked(this.node.getChildByName("btn4"),(function(e){t.renderOptOnOff=!t.renderOptOnOff,t.node.getChildByName("tip").getComponent(s).string="åˆ†å±‚ä¼˜åŒ–:"+(t.renderOptOnOff?"å¼€å¯":"å…³é—­"),t.vlist.onOffSortLayer(t.renderOptOnOff)})),f.onClicked(this.node.getChildByName("btn5"),(function(e){t.data.push({data1:"æ–°å¢çš„æ•°æ® "+(t.data.length+1),data2:"2025.10."+(t.data.length+1)}),t.vlist.flashToBottom(),t.vlist.refreshList(t.data),t.vlist.scrollToBottom(!0)}))},e}(d)).prototype,"vlist",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=g))||p));o._RF.pop()}}}));

System.register("chunks:///_virtual/scene7.ts",["./rollupPluginModLoBabelHelpers.js","cc","./VScrollView.ts","./UIButton.ts"],(function(t){var e,n,i,a,o,r,l,s,d,c,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,l=t.game,s=t.Label,d=t.Component},function(t){c=t.VirtualScrollView},function(t){f=t.default}],execute:function(){var p,h,u,g,m;o._RF.push({},"2bc24RGOUpMfIABitI46SQW","scene7",void 0);var y=r.ccclass,C=r.property;t("scene7",(p=y("scene7"),h=C(c),p((m=e((g=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,i(e,"vlist",m,a(e)),e.data=[],e.renderOptOnOff=!0,e}return n(e,t),e.prototype.onLoad=function(){var t=this;l.frameRate=120;for(var e=0;e<40;e++)this.data.push({data1:"ç¬¬"+(e+1)+"æ¡æ•°æ®",data2:"2025.10."+(1+e),type:e%3+1});this.vlist&&(this.vlist.getItemTypeIndexFn=function(e){return t.data[e].type-1},this.vlist.renderItemFn=function(e,n){var i=t.data[n];if(1===i.type){var a=e.getChildByName("title").getComponent(s),o=e.getChildByName("time").getComponent(s);a.string="ç±»å‹1:"+t.data[n].data1,o.string=t.data[n].data2}else if(2===i.type){e.getChildByName("title").getComponent(s).string="ç±»å‹2:"+t.data[n].data1}else if(3===i.type){e.getChildByName("msg").getComponent(s).string="ç±»å‹3ï¼š"+t.data[n].data1}},this.vlist.onItemClickFn=function(e,n){t.node.getChildByName("tip").getComponent(s).string="ä½ ç‚¹å‡»äº†ç¬¬"+(n+1)+"é¡¹,å†…å®¹:"+t.data[n].data1},this.vlist.refreshList(this.data)),f.onClicked(this.node.getChildByName("btn1"),(function(e){t.data[1].data1="ã€å·²ä¿®æ”¹ã€‘é‡è¦é€šçŸ¥2",t.vlist.refreshIndex(1)})),f.onClicked(this.node.getChildByName("btn2"),(function(e){t.vlist.scrollToBottom(!0)})),f.onClicked(this.node.getChildByName("btn3"),(function(e){t.vlist.scrollToIndex(9,!0)})),f.onClicked(this.node.getChildByName("btn4"),(function(e){t.renderOptOnOff=!t.renderOptOnOff,t.node.getChildByName("tip").getComponent(s).string="åˆ†å±‚ä¼˜åŒ–:"+(t.renderOptOnOff?"å¼€å¯":"å…³é—­"),t.vlist.onOffSortLayer(t.renderOptOnOff)})),f.onClicked(this.node.getChildByName("btn5"),(function(e){t.data.push({data1:"æ–°å¢æ•°æ®: ç¬¬"+(t.data.length+1)+"æ¡æ•°æ®",data2:"2025.10."+(t.data.length+1),type:t.data.length%3+1}),t.vlist.refreshList(t.data),t.vlist.scrollToBottom(!0)}))},e}(d)).prototype,"vlist",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=g))||u));o._RF.pop()}}}));

System.register("chunks:///_virtual/UIButton.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,o,i,a,s,c,r,l,h,u,d,_,p,f,b,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized,a=t.asyncToGenerator,s=t.regeneratorRuntime},function(t){c=t.cclegacy,r=t._decorator,l=t.Vec2,h=t.Vec3,u=t.Rect,d=t.UITransform,_=t.Input,p=t.Tween,f=t.Sprite,b=t.Node,v=t.Component}],execute:function(){var g,m,T,C,M,S,y,k,E,w,I,U,B,V,L,x,R,P,z;t("getBoundingBoxWorld",H),c._RF.push({},"c0158qRFldF55ZvPm39eZ0S","UIButton",void 0);var D=r.ccclass,O=r.property;function H(t,e,n){var o=t.width,i=t.height;return n.set(-t.anchorX*o,-t.anchorY*i,o,i),n.transformMat4(e.worldMatrix),n}t("default",(g=D("UIButton"),m=O({tooltip:"æ˜¯å¦æœ‰äº¤äº’æ•ˆæœ"}),T=O({tooltip:"æ˜¯å¦é˜»æ­¢äº‹ä»¶å†’æ³¡åˆ°çˆ¶èŠ‚ç‚¹"}),C=O({tooltip:"äº¤äº’æ—¶ç¼©æ”¾åŠ¨ç”»çš„ç›®æ ‡å€¼",range:[.7,1,.01]}),M=O({tooltip:"äº¤äº’æ—¶ç¼©æ”¾åŠ¨ç”»çš„æŒç»­æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰",range:[20,300,10]}),S=O({tooltip:"æ˜¯å¦æ’­æ”¾éŸ³æ•ˆ"}),y=O({tooltip:"è§¦æ‘¸é˜²æŠ–é—´éš”ï¼ˆæ¯«ç§’ï¼‰- é˜²æ­¢è¯¯è§¦",range:[50,500,10]}),k=O({tooltip:"ç‚¹å‡»å›è°ƒé˜²æŠ–é—´éš”ï¼ˆæ¯«ç§’ï¼‰- é˜²æ­¢é‡å¤è§¦å‘å›è°ƒ/ç½‘ç»œè¯·æ±‚",range:[200,2e3,50]}),E=O({tooltip:"ç§»åŠ¨é˜ˆå€¼ï¼ˆåƒç´ ï¼‰- è¶…è¿‡æ­¤è·ç¦»è§†ä¸ºæ»‘åŠ¨è€Œéç‚¹å‡»",range:[5,50,1]}),g((U=e((I=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))||this).node_target=null,o(e,"b_interaction",U,i(e)),o(e,"b_stopPropagation",B,i(e)),o(e,"scaleTarget",V,i(e)),o(e,"duration",L,i(e)),o(e,"b_audioEffectWhenClick",x,i(e)),o(e,"debounceTouchInterval",R,i(e)),o(e,"clickCallbackInterval",P,i(e)),o(e,"movementThreshold",z,i(e)),e._lastTouchStartTime=0,e._lastTouchEndTime=0,e._currentTouchStartTime=0,e._lastClickCallbackTime=0,e._touchMoveValid=!1,e._touchStartPos=new l,e._touchMovedBeyondThreshold=!1,e._registed=!1,e._initScale=new h(1,1,1),e._uit=null,e._tmpVec2=new l,e._cbMouseStarted=null,e._cbMouseMoved=null,e._cbClicked=null,e._cbStarted=null,e._cbMoved=null,e._cbEnded=null,e._cbCanceled=null,e._tmpTouchMoveRect=new u,e}n(e,t);var c=e.prototype;return c.onLoad=function(){this._uit=this.node.getComponent(d),this._uit?(this.node_target=this.node,this.node_target&&this.node_target.getScale(this._initScale),this._adjustScaleTarget()):console.error("UIButton: onLoad, node "+this.node.name+" does not have UITransform component")},c.onEnable=function(){this.registerEventListeners()},c.onDisable=function(){this.unregisterEventListeners()},c.registerEventListeners=function(){this._registed||(this._registed=!0,this.node.on(_.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(_.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(_.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(_.EventType.TOUCH_CANCEL,this.onTouchCancel,this))},c.unregisterEventListeners=function(){this._registed&&(this._registed=!1,this.node.off(_.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(_.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.off(_.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(_.EventType.TOUCH_CANCEL,this.onTouchCancel,this))},c.onMouseStart=function(t){this.b_stopPropagation&&(t.propagationStopped=!0),this._cbMouseStarted&&this._cbMouseStarted(this,t)},c.onMouseMove=function(t){this.b_stopPropagation&&(t.propagationStopped=!0),this._cbMouseMoved&&this._cbMouseMoved(this,t)},c.onTouchStart=function(t){this.b_stopPropagation&&(t.propagationStopped=!0),this.node_target&&this._animatePressDown(this.node_target),this.debounceTouchStartValid()&&(this._currentTouchStartTime=Date.now(),this._touchMoveValid=!0,this._touchMovedBeyondThreshold=!1,t.getUILocation(this._touchStartPos),this._cbStarted&&this._cbStarted(this,t))},c.onTouchMove=function(t){if(!this._touchMovedBeyondThreshold){var e=t.getUILocation(this._tmpVec2);l.distance(this._touchStartPos,e)>this.movementThreshold&&(this._touchMovedBeyondThreshold=!0)}if(this._uit){var n=t.getUILocation(this._tmpVec2);if(H(this._uit,this.node,this._tmpTouchMoveRect),this._touchMoveValid&&!this._tmpTouchMoveRect.contains(n))return this._touchMoveValid=!1,this._animateRelease(this.node_target),void(this._cbCanceled&&this._cbCanceled(this,t))}this._cbMoved&&this._cbMoved(this,t)},c.onTouchEnd=function(){var t=a(s().mark((function t(e){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.b_stopPropagation&&(e.propagationStopped=!0),this.node_target&&this._animateRelease(this.node_target),this._cbEnded&&this._cbEnded(this,e),!this.clickSureValid()||!this.clickCallbackValid()){t.next=9;break}if(t.t0=this._cbClicked,!t.t0){t.next=8;break}return t.next=8,this._cbClicked(this,e);case 8:this._lastClickCallbackTime=Date.now();case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),c.onTouchCancel=function(t){this.b_stopPropagation&&(t.propagationStopped=!0),this._cbCanceled&&this._cbCanceled(this,t),this.node_target&&this._animateRelease(this.node_target)},c.debounceTouchStartValid=function(){var t=Date.now();return!(t-this._lastTouchStartTime<this.debounceTouchInterval)&&(this._lastTouchStartTime=t,!0)},c.clickSureValid=function(){return!!this._touchMoveValid&&!this._touchMovedBeyondThreshold},c.clickCallbackValid=function(){return!(Date.now()-this._lastClickCallbackTime<this.clickCallbackInterval)},c._adjustScaleTarget=function(){var t,e=null==(t=this.node.getComponent(d))?void 0:t.width;if(e&&(Math.abs(this._initScale.x-this._initScale.x*this.scaleTarget)*e<16&&0!==this._initScale.x)){var n=this.scaleTarget<1?-1:1;this.scaleTarget=(this._initScale.x*e+16*n)/(this._initScale.x*e)}},c._animatePressDown=function(t){t&&this.b_interaction&&t.setScale(this._initScale.x*this.scaleTarget,this._initScale.y*this.scaleTarget,this._initScale.z)},c._animateRelease=function(t){t&&this.b_interaction&&(t.scale.x===this._initScale.x&&t.scale.y===this._initScale.y||(p.stopAllByTarget(t),t.setScale(this._initScale.x,this._initScale.y,this._initScale.z)))},c.onClicked=function(t){this._cbClicked&&(this._cbClicked=null),this._cbClicked=t},c.onMouseStarted=function(t){this._cbMouseStarted&&(this._cbMouseStarted=null),this._cbMouseStarted=t},c.onMouseMoved=function(t){this._cbMouseMoved&&(this._cbMouseMoved=null),this._cbMouseMoved=t},c.onStarted=function(t){this._cbStarted&&(this._cbStarted=null),this._cbStarted=t},c.onMoved=function(t){this._cbMoved&&(this._cbMoved=null),this._cbMoved=t},c.onEnded=function(t){this._cbEnded&&(this._cbEnded=null),this._cbEnded=t},c.onCanceled=function(t){this._cbCanceled&&(this._cbCanceled=null),this._cbCanceled=t},c.enableClick=function(t){t?this.registerEventListeners():this.unregisterEventListeners();var e=this.node.getComponent(f);e&&(e.grayscale=!t),this._animateRelease(this.node_target)},c.enableClickVisual=function(t){var e=this.node.getComponent(f);e&&(e.grayscale=!t),this._animateRelease(this.node_target)},c.enableClickAction=function(t){t?this.registerEventListeners():this.unregisterEventListeners()},e.onClicked=function(t,n){if(t instanceof e)return t.onClicked(n),t;if(t instanceof b){var o=t.getComponent(e);return o||(o=t.addComponent(e)),o.onClicked(n),o}return console.error("UIButton: onClicked, buttonOrNode is null / type not match "),null},e.onMouseStarted=function(t,n){if(t instanceof e)t.onMouseStarted(n);else if(t instanceof b){var o=t.getComponent(e);o?o.onMouseStarted(n):console.warn("UIButton: onMouseStarted, node "+t.name+" does not have UIButton component")}else console.warn("UIButton: onMouseStarted, invalid parameter type")},e.onMouseMoved=function(t,n){if(t instanceof e)t.onMouseMoved(n);else if(t instanceof b){var o=t.getComponent(e);o?o.onMouseMoved(n):console.warn("UIButton: onMouseMoved, node "+t.name+" does not have UIButton component")}else console.warn("UIButton: onMouseMoved, invalid parameter type")},e.onStarted=function(t,n){if(t instanceof e)t.onStarted(n);else if(t instanceof b){var o=t.getComponent(e);o?o.onStarted(n):console.warn("UIButton: onStarted, node "+t.name+" does not have UIButton component")}else console.warn("UIButton: onStarted, invalid parameter type")},e.onMoved=function(t,n){if(t instanceof e)t.onMoved(n);else if(t instanceof b){var o=t.getComponent(e);o?o.onMoved(n):console.warn("UIButton: onMoved, node "+t.name+" does not have UIButton component")}else console.warn("UIButton: onMoved, invalid parameter type")},e.onEnded=function(t,n){if(t instanceof e)t.onEnded(n);else if(t instanceof b){var o=t.getComponent(e);o?o.onEnded(n):console.warn("UIButton: onEnded, node "+t.name+" does not have UIButton component")}else console.warn("UIButton: onEnded, invalid parameter type")},e.onCanceled=function(t,n){if(t instanceof e)t.onCanceled(n);else if(t instanceof b){var o=t.getComponent(e);o?o.onCanceled(n):console.warn("UIButton: onCanceled, node "+t.name+" does not have UIButton component")}else console.warn("UIButton: onCanceled, invalid parameter type")},e.enableClick=function(t,n){if(t instanceof e)t.enableClick(n);else if(t instanceof b){var o=t.getComponent(e);o?o.enableClick(n):console.warn("UIButton: enableClick, node "+t.name+" does not have UIButton component")}else console.warn("UIButton: enableClick, invalid parameter type")},e}(v)).prototype,"b_interaction",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),B=e(I.prototype,"b_stopPropagation",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),V=e(I.prototype,"scaleTarget",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.96}}),L=e(I.prototype,"duration",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 60}}),x=e(I.prototype,"b_audioEffectWhenClick",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),R=e(I.prototype,"debounceTouchInterval",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),P=e(I.prototype,"clickCallbackInterval",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 250}}),z=e(I.prototype,"movementThreshold",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),w=I))||w));c._RF.pop()}}}));

System.register("chunks:///_virtual/UIPersist.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIButton.ts"],(function(e){var n,t,o,r,i,a,c,s,l,u,d;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,c=e.Node,s=e.director,l=e.Canvas,u=e.Component},function(e){d=e.default}],execute:function(){var p,f,h,v,m,b;e("getSpecifyComponent",y),i._RF.push({},"c07a3GGZLtBwqKF61vel2AO","UIPersist",void 0);var C=a.ccclass,g=a.property;function y(e,n,t){if(void 0===t&&(t=!0),!e||!n)return null;for(var o=e;o.parent;)o=o.parent;if(t){var r=o.getComponentInChildren(n)||null;return r||console.error("âŒæœªæ‰¾åˆ°æŒ‡å®šç±»å‹çš„ç»„ä»¶: "+n.name+" ,è¯·æ£€æŸ¥èŠ‚ç‚¹æ ‘ä¸­æ˜¯å¦å­˜åœ¨è¯¥ç»„ä»¶"),r}var i=o.getComponentsInChildren(n)||[];return 0===i.length?(console.error("âŒæœªæ‰¾åˆ°æŒ‡å®šç±»å‹çš„ç»„ä»¶: "+n.name+" ,è¯·æ£€æŸ¥èŠ‚ç‚¹æ ‘ä¸­æ˜¯å¦å­˜åœ¨è¯¥ç»„ä»¶"),null):i}e("UIPersist",(p=C("UIPersist"),f=g(c),p(((b=function(e){function n(){for(var n,t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return n=e.call.apply(e,[this].concat(i))||this,o(n,"node_back",m,r(n)),n}t(n,e);var i=n.prototype;return i.onLoad=function(){var e=this;s.isPersistRootNode(this.node)||s.addPersistRootNode(this.node),n.back=this.node_back,d.onClicked(this.node_back,(function(n){e.node_back.active=!1,s.loadScene("åœºæ™¯0-ç¤ºä¾‹å¼•å¯¼")}))},i.onEnable=function(){var e=y(this.node,l);e&&(this.node.getComponent(l).cameraComponent=e.cameraComponent)},n}(u)).back=null,m=n((v=b).prototype,"node_back",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=v))||h));i._RF.pop()}}}));

System.register("chunks:///_virtual/VScrollView-001.ts",["./rollupPluginModLoBabelHelpers.js","cc","./VScrollViewItem.ts"],(function(t){var i,e,s,n,o,h,r,l,a,u,c,p,_,f,m,d,g,b,v,y,x,H,w;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,s=t.initializerDefineProperty,n=t.assertThisInitialized,o=t.createForOfIteratorHelperLoose,h=t.createClass,r=t.asyncToGenerator,l=t.regeneratorRuntime},function(t){a=t.cclegacy,u=t._decorator,c=t.Node,p=t.Prefab,_=t.Vec2,f=t.input,m=t.Input,d=t.math,g=t.tween,b=t.Vec3,v=t.Component,y=t.UITransform,x=t.Mask,H=t.instantiate},function(t){w=t.VScrollViewItem}],execute:function(){var C,V,I,S,T,M,F,P,N,D,k,A,L,E,O,z,U,Y,G,K,W,R,B,j,q,J,Q,X,Z,$,tt,it,et,st,nt,ot,ht,rt,lt,at;a._RF.push({},"5b646PUtKNExqxUbd9MvwPb","VScrollView-001",void 0);var ut=u.ccclass,ct=u.property,pt=u.menu,_t=function(){function t(t){var i=this;this.pools=new Map,this.prefabs=[],this.prefabs=t,t.forEach((function(t,e){i.pools.set(e,[])}))}var i=t.prototype;return i.get=function(t){var i=this.pools.get(t);if(!i)return console.error("[VScrollView NodePool] ç±»å‹ "+t+" ä¸å­˜åœ¨"),null;if(i.length>0){var e=i.pop();return e.active=!0,e}return H(this.prefabs[t])},i.put=function(t,i){if(t){var e=this.pools.get(i);if(!e)return console.error("[VScrollView NodePool] ç±»å‹ "+i+" ä¸å­˜åœ¨"),void t.destroy();t.active=!1,t.removeFromParent(),e.push(t)}},i.clear=function(){this.pools.forEach((function(t){t.forEach((function(t){return t.destroy()})),t.length=0})),this.pools.clear()},i.getStats=function(){var t={};return this.pools.forEach((function(i,e){t["type"+e]=i.length})),t},t}();t("VirtualScrollView",(C=ut("VirtualScrollView"),V=pt("2D/VirtualScrollView(è™šæ‹Ÿæ»šåŠ¨åˆ—è¡¨)"),I=ct({type:c,displayName:"å®¹å™¨èŠ‚ç‚¹",tooltip:"content å®¹å™¨èŠ‚ç‚¹ï¼ˆåœ¨ Viewport ä¸‹ï¼‰"}),S=ct({displayName:"å¯ç”¨è™šæ‹Ÿåˆ—è¡¨",tooltip:"æ˜¯å¦å¯ç”¨è™šæ‹Ÿåˆ—è¡¨æ¨¡å¼ï¼ˆå…³é—­åˆ™ä»…æä¾›æ»šåŠ¨åŠŸèƒ½ï¼‰"}),T=ct({type:p,displayName:"å­é¡¹é¢„åˆ¶ä½“",tooltip:"å¯é€‰ï¼šä» Prefab åˆ›å»º itemï¼ˆç­‰é«˜æ¨¡å¼ï¼‰",visible:function(){return this.useVirtualList&&!this.useDynamicHeight}}),M=ct({displayName:"ä¸ç­‰é«˜æ¨¡å¼",tooltip:"å¯ç”¨ä¸ç­‰é«˜æ¨¡å¼ï¼ˆä»…æ”¯æŒå•åˆ—ï¼‰",visible:function(){return this.useVirtualList}}),F=ct({type:[p],displayName:"å­é¡¹é¢„åˆ¶ä½“æ•°ç»„",tooltip:"ä¸ç­‰é«˜æ¨¡å¼ï¼šé¢„å…ˆæä¾›çš„å­é¡¹é¢„åˆ¶ä½“æ•°ç»„ï¼ˆå¯åœ¨ç¼–è¾‘å™¨æ‹–å…¥ï¼‰",visible:function(){return this.useVirtualList&&this.useDynamicHeight}}),P=ct({displayName:"åˆ—æ•°",tooltip:"æ¯è¡Œåˆ—æ•°ï¼ˆGridæ¨¡å¼ï¼Œ1ä¸ºå•åˆ—ï¼‰",range:[1,10,1],visible:function(){return this.useVirtualList&&!this.useDynamicHeight}}),N=ct({displayName:"åˆ—é—´è·",tooltip:"åˆ—é—´è·ï¼ˆåƒç´ ï¼ŒGridæ¨¡å¼ï¼‰",range:[0,1e3,1],visible:function(){return this.useVirtualList&&!this.useDynamicHeight}}),D=ct({displayName:"é¡¹é—´è·",tooltip:"é¡¹é—´è·ï¼ˆåƒç´ ï¼‰",range:[0,1e3,1],visible:function(){return this.useVirtualList}}),k=ct({displayName:"æ€»æ¡æ•°",tooltip:"æ€»æ¡æ•°ï¼ˆå¯åœ¨è¿è¡Œæ—¶ setTotalCount åŠ¨æ€ä¿®æ”¹ï¼‰",range:[0,1e3,1],visible:function(){return this.useVirtualList}}),A=ct({displayName:"é¢å¤–ç¼“å†²",tooltip:"é¢å¤–ç¼“å†²ï¼ˆå¯è§†åŒºå¤–å¤šæ¸²æŸ“å‡ æ¡ï¼Œé¿å…è¾¹ç¼˜å¤ç”¨é—ªçƒï¼‰",range:[0,10,1],visible:function(){return this.useVirtualList}}),L=ct({displayName:"åƒç´ å¯¹é½",tooltip:"æ˜¯å¦å¯ç”¨åƒç´ å¯¹é½"}),E=ct({displayName:"æƒ¯æ€§é˜»å°¼ç³»æ•°",tooltip:"æŒ‡æ•°è¡°å‡ç³»æ•°ï¼Œè¶Šå¤§å‡é€Ÿè¶Šå¿«",range:[0,10,.5]}),O=ct({displayName:"å¼¹ç°§åˆšåº¦",tooltip:"è¶Šç•Œå¼¹ç°§åˆšåº¦ Kï¼ˆå»ºè®® 120â€“240ï¼‰"}),z=ct({displayName:"å¼¹ç°§é˜»å°¼",tooltip:"è¶Šç•Œé˜»å°¼ Cï¼ˆå»ºè®® 22â€“32ï¼‰"}),U=ct({displayName:"é€Ÿåº¦é˜ˆå€¼",tooltip:"é€Ÿåº¦é˜ˆå€¼ï¼ˆåƒç´ /ç§’ï¼‰ï¼Œä½äºå³åœæ­¢"}),Y=ct({displayName:"é€Ÿåº¦çª—å£",tooltip:"é€Ÿåº¦ä¼°è®¡çª—å£ï¼ˆç§’ï¼‰"}),G=ct({displayName:"æœ€å¤§æƒ¯æ€§é€Ÿåº¦",tooltip:"æœ€å¤§æƒ¯æ€§é€Ÿåº¦ï¼ˆåƒç´ /ç§’ï¼‰"}),K=ct({displayName:"iOSå‡é€Ÿæ›²çº¿",tooltip:"æ˜¯å¦ä½¿ç”¨ iOS é£æ ¼çš„å‡é€Ÿæ›²çº¿"}),C(W=V((B=i((R=function(t){function i(){for(var i,e=arguments.length,o=new Array(e),h=0;h<e;h++)o[h]=arguments[h];return i=t.call.apply(t,[this].concat(o))||this,s(i,"content",B,n(i)),s(i,"useVirtualList",j,n(i)),s(i,"itemPrefab",q,n(i)),s(i,"useDynamicHeight",J,n(i)),s(i,"itemPrefabs",Q,n(i)),i.itemHeight=100,i.itemWidth=100,s(i,"columns",X,n(i)),s(i,"columnSpacing",Z,n(i)),s(i,"spacing",$,n(i)),s(i,"totalCount",tt,n(i)),s(i,"buffer",it,n(i)),s(i,"pixelAlign",et,n(i)),s(i,"inertiaDampK",st,n(i)),s(i,"springK",nt,n(i)),s(i,"springC",ot,n(i)),s(i,"velocitySnap",ht,n(i)),s(i,"velocityWindow",rt,n(i)),s(i,"maxVelocity",lt,n(i)),s(i,"useIOSDecelerationCurve",at,n(i)),i.renderItemFn=null,i.provideNodeFn=null,i.onItemClickFn=null,i.playItemAppearAnimationFn=null,i.getItemHeightFn=null,i.getItemTypeIndexFn=null,i._viewportH=0,i._contentH=0,i._boundsMin=0,i._boundsMax=0,i._velocity=0,i._isTouching=!1,i._velSamples=[],i._slotNodes=[],i._slots=0,i._slotFirstIndex=0,i._itemHeights=[],i._prefixY=[],i._prefabHeightCache=new Map,i._nodePool=null,i._slotPrefabIndices=[],i._needAnimateIndices=new Set,i._initSortLayerFlag=!0,i._scrollTween=null,i._tmpMoveVec2=new _,i}e(i,t);var a=i.prototype;return a._getContentNode=function(){return this.content||(console.warn("[VirtualScrollView] :"+this.node.name+" è¯·åœ¨å±æ€§é¢æ¿ç»‘å®š content å®¹å™¨èŠ‚ç‚¹"),this.content=this.node.getChildByName("content")),this.content},a.start=function(){var t=r(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.content=this._getContentNode(),this.content){t.next=3;break}return t.abrupt("return");case 3:if(this.node.getComponent(x)||console.warn("[VirtualScrollView] å»ºè®®åœ¨è§†çª—èŠ‚ç‚¹æŒ‚ä¸€ä¸ª Mask ç»„ä»¶ç”¨äºè£å‰ª"),this.columns=Math.round(this.columns),this.columns=Math.max(1,this.columns),this.useVirtualList){t.next=15;break}return this._viewportH=this._viewportTf.height,this._contentH=this._contentTf.height,this._boundsMin=0,this._boundsMax=Math.max(0,this._contentH-this._viewportH),this._bindTouch(),this._bindGlobalTouch(),t.abrupt("return");case 15:if(this.content.removeAllChildren(),this._viewportH=this._viewportTf.height,!this.useDynamicHeight){t.next=22;break}return t.next=20,this._initDynamicHeightMode();case 20:t.next=24;break;case 22:return t.next=24,this._initFixedHeightMode();case 24:this._bindTouch(),this._bindGlobalTouch();case 26:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),a.onDestroy=function(){f.off(m.EventType.TOUCH_END,this._onGlobalTouchEnd,this),f.off(m.EventType.TOUCH_CANCEL,this._onGlobalTouchEnd,this),this.node.off(c.EventType.TOUCH_START,this._onDown,this),this.node.off(c.EventType.TOUCH_MOVE,this._onMove,this),this.node.off(c.EventType.TOUCH_END,this._onUp,this),this.node.off(c.EventType.TOUCH_CANCEL,this._onUp,this),this._nodePool&&(this._nodePool.clear(),this._nodePool=null)},a._bindTouch=function(){this.node.on(c.EventType.TOUCH_START,this._onDown,this),this.node.on(c.EventType.TOUCH_MOVE,this._onMove,this),this.node.on(c.EventType.TOUCH_END,this._onUp,this),this.node.on(c.EventType.TOUCH_CANCEL,this._onUp,this)},a._bindGlobalTouch=function(){f.on(m.EventType.TOUCH_END,this._onGlobalTouchEnd,this),f.on(m.EventType.TOUCH_CANCEL,this._onGlobalTouchEnd,this)},a._onGlobalTouchEnd=function(t){this._isTouching&&(console.log("[VScrollView] Global touch end detected"),this._onUp(t))},a._initFixedHeightMode=function(){var t=r(l().mark((function t(){var i,e,s,n,o,h,r,a=this;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.provideNodeFn||(this.provideNodeFn=function(t){if(a.itemPrefab)return H(a.itemPrefab);console.warn("[VirtualScrollView] æ²¡æœ‰æä¾› itemPrefab");var i=new c("item-auto-create");return i.addComponent(y).setContentSize(a._viewportTf.width,a.itemHeight),i}),!((i=this.provideNodeFn(0))instanceof Promise)){t.next=6;break}return t.next=5,i;case 5:i=t.sent;case 6:for(e=i.getComponent(y),this.itemHeight=e.height,this.itemWidth=e.width,this._recomputeContentHeight(),s=this.itemHeight+this.spacing,n=Math.ceil(this._viewportH/s),this._slots=Math.max(1,(n+this.buffer+2)*this.columns),o=0;o<this._slots;o++)(h=H(i)).parent=this.content,(r=h.getComponent(y))&&(r.width=this.itemWidth,r.height=this.itemHeight),this._slotNodes.push(h);this._slotFirstIndex=0,this._layoutSlots(this._slotFirstIndex,!0);case 16:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),a._initDynamicHeightMode=function(){var t=r(l().mark((function t(){var i,e,s,n,o,h,r,a,u;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.getItemHeightFn){t.next=14;break}for(console.log("[VirtualScrollView] ä½¿ç”¨å¤–éƒ¨æä¾›çš„ getItemHeightFn"),this._itemHeights=[],i=0;i<this.totalCount;i++)e=this.getItemHeightFn(i),this._itemHeights.push(e);if(this._buildPrefixSum(),!(this.itemPrefabs.length>0)){t.next=10;break}console.log("[VirtualScrollView] åˆå§‹åŒ–èŠ‚ç‚¹æ± "),this._nodePool=new _t(this.itemPrefabs),t.next=12;break;case 10:return console.error("[VirtualScrollView] éœ€è¦è‡³å°‘ä¸€ä¸ª itemPrefab"),t.abrupt("return");case 12:return this._initDynamicSlots(),t.abrupt("return");case 14:if(0!==this.itemPrefabs.length&&this.getItemTypeIndexFn){t.next=17;break}return console.error("[VirtualScrollView] ä¸ç­‰é«˜æ¨¡å¼å¿…é¡»æä¾›ä»¥ä¸‹ä¹‹ä¸€ï¼š\n1. getItemHeightFn å›è°ƒå‡½æ•°\n2. itemPrefabs æ•°ç»„ + getItemTypeIndexFn å›è°ƒå‡½æ•°"),t.abrupt("return");case 17:for(console.log("[VirtualScrollView] ä½¿ç”¨é‡‡æ ·æ¨¡å¼ï¼ˆä» itemPrefabs é‡‡æ ·é«˜åº¦ï¼‰"),this._nodePool=new _t(this.itemPrefabs),this._prefabHeightCache.clear(),s=0;s<this.itemPrefabs.length;s++)o=H(this.itemPrefabs[s]),h=(null==(n=o.getComponent(y))?void 0:n.height)||100,this._prefabHeightCache.set(s,h),o.destroy(),console.log("[VirtualScrollView] é¢„åˆ¶ä½“["+s+"] é‡‡æ ·é«˜åº¦: "+h);for(this._itemHeights=[],r=0;r<this.totalCount;r++)a=this.getItemTypeIndexFn(r),void 0!==(u=this._prefabHeightCache.get(a))?this._itemHeights.push(u):(console.warn("[VirtualScrollView] ç´¢å¼• "+r+" çš„ç±»å‹ç´¢å¼• "+a+" æ— æ•ˆï¼Œä½¿ç”¨é»˜è®¤é«˜åº¦"),this._itemHeights.push(this._prefabHeightCache.get(0)||100));this._buildPrefixSum(),this._initDynamicSlots();case 25:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),a._initDynamicSlots=function(){var t=this._contentH/this.totalCount||100,i=Math.ceil(this._viewportH/t)+2*this.buffer+4,e=Math.ceil(this._viewportH/80)+2*this.buffer;i=Math.max(i,e);var s=Math.ceil(this._viewportH/50)+4*this.buffer;i=Math.min(i,s),this._slots=Math.min(i,Math.max(this.totalCount,e)),this._slotNodes=new Array(this._slots).fill(null),this._slotPrefabIndices=new Array(this._slots).fill(-1),this._slotFirstIndex=0,this._layoutSlots(this._slotFirstIndex,!0),console.log("[VScrollView] åˆå§‹åŒ–æ§½ä½: "+this._slots+" (æ€»æ•°æ®: "+this.totalCount+", è§†å£é«˜åº¦: "+this._viewportH+")")},a._buildPrefixSum=function(){var t=this._itemHeights.length;this._prefixY=new Array(t);for(var i=0,e=0;e<t;e++)this._prefixY[e]=i,i+=this._itemHeights[e]+this.spacing;this._contentH=i-this.spacing,this._contentH<0&&(this._contentH=0),this._contentTf.height=Math.max(this._contentH,this._viewportH),this._boundsMin=0,this._boundsMax=Math.max(0,this._contentH-this._viewportH)},a._yToFirstIndex=function(t){if(t<=0)return 0;for(var i=0,e=this._prefixY.length-1,s=this._prefixY.length;i<=e;){var n=i+e>>1;this._prefixY[n]>t?(s=n,e=n-1):i=n+1}return Math.max(0,s-1)},a._calcVisibleRange=function(t){var i=this._prefixY.length;if(0===i)return{start:0,end:0};for(var e=this._yToFirstIndex(t),s=t+this._viewportH,n=e;n<i;){var o=this._prefixY[n];this._itemHeights[n];if(o>=s)break;n++}return{start:Math.max(0,e-this.buffer),end:Math.min(i,n+this.buffer)}},a.update=function(t){if(this.content&&!this._isTouching&&!this._scrollTween){var i=this.content.position.y,e=0;if(i<this._boundsMin)e=-this.springK*(i-this._boundsMin)-this.springC*this._velocity;else if(i>this._boundsMax)e=-this.springK*(i-this._boundsMax)-this.springC*this._velocity;else if(this.useIOSDecelerationCurve){var s=Math.abs(this._velocity);this._velocity*=s>2e3?Math.exp(.7*-this.inertiaDampK*t):s>500?Math.exp(-this.inertiaDampK*t):Math.exp(1.3*-this.inertiaDampK*t)}else this._velocity*=Math.exp(-this.inertiaDampK*t);this._velocity+=e*t,Math.abs(this._velocity)<this.velocitySnap&&0===e&&(this._velocity=0),0!==this._velocity&&(i+=this._velocity*t,this.pixelAlign&&(i=Math.round(i)),this._setContentY(i),this.useVirtualList&&this._updateVisible(!1))}},a.updateItemHeight=function(t,i){if(this.useDynamicHeight)if(t<0||t>=this.totalCount)console.warn("[VScrollView] ç´¢å¼• "+t+" è¶…å‡ºèŒƒå›´");else{var e=i;if(void 0===e){if(!this.getItemHeightFn)return void console.error("[VScrollView] æ²¡æœ‰æä¾› newHeight å‚æ•°ï¼Œä¸”æœªè®¾ç½® getItemHeightFn");e=this.getItemHeightFn(t)}this._itemHeights[t]!==e&&(this._itemHeights[t]=e,this._rebuildPrefixSumFrom(t),this._updateVisible(!0))}else console.warn("[VScrollView] åªæœ‰ä¸ç­‰é«˜æ¨¡å¼æ”¯æŒ updateItemHeight")},a._rebuildPrefixSumFrom=function(t){if(0!==t){for(var i=this._prefixY[t-1]+this._itemHeights[t-1]+this.spacing,e=t;e<this._itemHeights.length;e++)this._prefixY[e]=i,i+=this._itemHeights[e]+this.spacing;this._contentH=i-this.spacing,this._contentH<0&&(this._contentH=0),this._contentTf.height=Math.max(this._contentH,this._viewportH),this._boundsMin=0,this._boundsMax=Math.max(0,this._contentH-this._viewportH)}else this._buildPrefixSum()},a.updateItemHeights=function(t){if(this.useDynamicHeight){if(0!==t.length){for(var i,e=this.totalCount,s=!1,n=o(t);!(i=n()).done;){var h=i.value,r=h.index,l=h.height;r<0||r>=this.totalCount||this._itemHeights[r]!==l&&(this._itemHeights[r]=l,e=Math.min(e,r),s=!0)}s&&(this._rebuildPrefixSumFrom(e),this._updateVisible(!0))}}else console.warn("[VScrollView] åªæœ‰ä¸ç­‰é«˜æ¨¡å¼æ”¯æŒ updateItemHeights")},a.refreshList=function(t){this.useVirtualList?"number"==typeof t?this.setTotalCount(t):this.setTotalCount(t.length):console.warn("[VirtualScrollView] ç®€å•æ»šåŠ¨æ¨¡å¼ä¸æ”¯æŒ refreshList")},a.setTotalCount=function(t){if(this._getContentNode(),this.useVirtualList){var i=this.totalCount;if(this.totalCount=Math.max(0,0|t),this.totalCount>i)for(var e=i;e<this.totalCount;e++)this._needAnimateIndices.add(e);if(this.useDynamicHeight){var s=this._itemHeights.length;if(this.totalCount>s)for(var n=s;n<this.totalCount;n++){var o=100;if(this.getItemHeightFn)o=this.getItemHeightFn(n);else if(this.getItemTypeIndexFn&&this._prefabHeightCache.size>0){var h=this.getItemTypeIndexFn(n);o=this._prefabHeightCache.get(h)||100}this._itemHeights.push(o)}else this.totalCount<s&&(this._itemHeights.length=this.totalCount);this._buildPrefixSum(),this.totalCount>i&&this._expandSlotsIfNeeded()}else this._recomputeContentHeight();this._slotFirstIndex=d.clamp(this._slotFirstIndex,0,Math.max(0,this.totalCount-1)),this._layoutSlots(this._slotFirstIndex,!0),this._updateVisible(!0)}else console.warn("[VScrollView] éè™šæ‹Ÿåˆ—è¡¨æ¨¡å¼ï¼Œä¸æ”¯æŒ setTotalCount")},a._expandSlotsIfNeeded=function(){for(var t=0,i=0,e=this._viewportH,s=0;s<this.totalCount&&!(i>=e);s++)t++,i+=this._itemHeights[s]+this.spacing;t+=2*this.buffer+4;var n=Math.ceil(this._viewportH/80)+2*this.buffer;t=Math.max(t,n);var o=Math.ceil(this._viewportH/50)+4*this.buffer;if((t=Math.min(t,o))>this._slots){var h=this._slots;this._slots=t;for(var r=h;r<this._slots;r++)this._slotNodes.push(null),this._slotPrefabIndices.push(-1);console.log("[VScrollView] æ§½ä½æ‰©å±•: "+h+" -> "+this._slots+" (æ€»æ•°æ®: "+this.totalCount+")")}},a._scrollToPosition=function(t,i){var e=this;if(void 0===i&&(i=!1),t=d.clamp(t,this._boundsMin,this._boundsMax),this._scrollTween&&(this._scrollTween.stop(),this._scrollTween=null),this._velocity=0,this._isTouching=!1,this._velSamples.length=0,i){this._velocity=0,this._isTouching=!1;var s=this.content.position.y,n=Math.abs(t-s),o=Math.max(.2,n/3e3);this._scrollTween=g(this.content).to(o,{position:new b(0,t,0)},{easing:"smooth",onUpdate:function(){e._updateVisible(!1)}}).call((function(){e._updateVisible(!0),e._scrollTween=null,e._velocity=0})).start()}else this._setContentY(this.pixelAlign?Math.round(t):t),this._updateVisible(!0)},a.scrollToTop=function(t){void 0===t&&(t=!1),this._scrollToPosition(this._boundsMin,t)},a.scrollToBottom=function(t){void 0===t&&(t=!1),this._scrollToPosition(this._boundsMax,t)},a.scrollToIndex=function(t,i){void 0===i&&(i=!1),t=d.clamp(0|t,0,Math.max(0,this.totalCount-1));var e=0;this.useDynamicHeight?e=this._prefixY[t]||0:e=Math.floor(t/this.columns)*(this.itemHeight+this.spacing);this._scrollToPosition(e,i)},a.onOffSortLayer=function(t){this._initSortLayerFlag=t,this._onOffSortLayerOperation()},a._onOffSortLayerOperation=function(){for(var t,i=o(this._slotNodes);!(t=i()).done;){var e=t.value.getComponent(w);e&&(this._initSortLayerFlag?e.onSortLayer():e.offSortLayer())}},a._flashToPosition=function(t){t=d.clamp(t,this._boundsMin,this._boundsMax),this._scrollTween&&(this._scrollTween.stop(),this._scrollTween=null),this._velocity=0,this._isTouching=!1,this._velSamples.length=0,this._setContentY(this.pixelAlign?Math.round(t):t),this._updateVisible(!0)},a.flashToTop=function(){this._flashToPosition(this._boundsMin)},a.flashToBottom=function(){this._flashToPosition(this._boundsMax)},a.flashToIndex=function(t){if(this.useVirtualList){t=d.clamp(0|t,0,Math.max(0,this.totalCount-1));var i=0;if(this.useDynamicHeight)i=this._prefixY[t]||0;else i=Math.floor(t/this.columns)*(this.itemHeight+this.spacing);this._flashToPosition(i)}else console.warn("[VirtualScrollView] ç®€å•æ»šåŠ¨æ¨¡å¼ä¸æ”¯æŒ flashToIndex")},a.refreshIndex=function(t){if(this.useVirtualList){var i=this._slotFirstIndex,e=i+this._slots-1;if(!(t<i||t>e)){var s=t-i,n=this._slotNodes[s];n&&this.renderItemFn&&this.renderItemFn(n,t)}}else console.warn("[VirtualScrollView] ç®€å•æ»šåŠ¨æ¨¡å¼ä¸æ”¯æŒ refreshIndex")},a._onDown=function(t){this._isTouching=!0,this._velocity=0,this._velSamples.length=0,this._scrollTween&&(this._scrollTween.stop(),this._scrollTween=null)},a._onMove=function(t){if(this._isTouching){var i=t.getUIDelta(this._tmpMoveVec2).y,e=this.content.position.y+i;this.pixelAlign&&(e=Math.round(e)),this._setContentY(e);var s=performance.now()/1e3;this._velSamples.push({t:s,dy:i});for(var n=s-this.velocityWindow;this._velSamples.length&&this._velSamples[0].t<n;)this._velSamples.shift();this.useVirtualList&&this._updateVisible(!1)}},a._onUp=function(t){if(this._isTouching){if(this._isTouching=!1,this._velSamples.length>=2){for(var i=0,e=0,s=Math.min(this._velSamples.length,5),n=this._velSamples.length-s+1;n<this._velSamples.length;n++)i+=this._velSamples[n].dy,e+=this._velSamples[n].t-this._velSamples[n-1].t;e>.001?(this._velocity=i/e,this._velocity=d.clamp(this._velocity,-this.maxVelocity,this.maxVelocity)):this._velocity=this._velSamples.length>0?d.clamp(60*this._velSamples[this._velSamples.length-1].dy,-this.maxVelocity,this.maxVelocity):0}else 1===this._velSamples.length?this._velocity=d.clamp(60*this._velSamples[0].dy,-this.maxVelocity,this.maxVelocity):this._velocity=0;this._velSamples.length=0}},a._updateVisible=function(t){if(this.useVirtualList){var i=this.content.position.y,e=0;if(this.useDynamicHeight){e=this._calcVisibleRange(i).start}else{var s=this.itemHeight+this.spacing,n=Math.floor(i/s)*this.columns;e=d.clamp(n,0,Math.max(0,this.totalCount-1))}if(this.totalCount<this._slots&&(e=0),t)return this._slotFirstIndex=e,void this._layoutSlots(this._slotFirstIndex,!0);var o=e-this._slotFirstIndex;if(0!==o){if(Math.abs(o)>=this._slots)return this._slotFirstIndex=e,void this._layoutSlots(this._slotFirstIndex,!0);var h=Math.abs(o);if(o>0){var r,l=this._slotNodes.splice(0,h);if((r=this._slotNodes).push.apply(r,l),this.useDynamicHeight&&this._slotPrefabIndices.length>0){var a,u=this._slotPrefabIndices.splice(0,h);(a=this._slotPrefabIndices).push.apply(a,u)}this._slotFirstIndex=e;for(var c=0;c<h;c++){var p=this._slots-h+c,_=this._slotFirstIndex+p;if(_>=this.totalCount){var f=this._slotNodes[p];f&&(f.active=!1)}else this._layoutSingleSlot(this._slotNodes[p],_,p)}}else{var m,g=this._slotNodes.splice(this._slotNodes.length+o,h);if((m=this._slotNodes).unshift.apply(m,g),this.useDynamicHeight&&this._slotPrefabIndices.length>0){var b,v=this._slotPrefabIndices.splice(this._slotPrefabIndices.length+o,h);(b=this._slotPrefabIndices).unshift.apply(b,v)}this._slotFirstIndex=e;for(var y=0;y<h;y++){var x=this._slotFirstIndex+y;if(x>=this.totalCount){var H=this._slotNodes[y];H&&(H.active=!1)}else this._layoutSingleSlot(this._slotNodes[y],x,y)}}}}},a._layoutSingleSlot=function(){var t=r(l().mark((function t(i,e,s){var n,o,h,r,a,u,c,p,_,f,m,d,g,b,v,x,H,w,C,V,I,S,T,M;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.useVirtualList){t.next=2;break}return t.abrupt("return");case 2:if(!this.useDynamicHeight){t.next=48;break}if(o=-1,o=this.getItemTypeIndexFn(e),h=this._slotPrefabIndices[s],r=null,h!==o||!this._slotNodes[s]){t.next=11;break}r=this._slotNodes[s],t.next=20;break;case 11:if(this._slotNodes[s]&&this._nodePool&&h>=0&&this._nodePool.put(this._slotNodes[s],h),!this._nodePool){t.next=20;break}if(r=this._nodePool.get(o)){t.next=17;break}return console.error("[VScrollView] æ— æ³•è·å–ç±»å‹ "+o+" çš„èŠ‚ç‚¹"),t.abrupt("return");case 17:r.parent=this.content,this._slotNodes[s]=r,this._slotPrefabIndices[s]=o;case 20:if(r){t.next=23;break}return console.error("[VScrollView] æ§½ä½ "+s+" èŠ‚ç‚¹ä¸ºç©ºï¼Œç´¢å¼• "+e),t.abrupt("return");case 23:if(r.active=!0,this._updateItemClickHandler(r,e),this.renderItemFn&&this.renderItemFn(r,e),!this.getItemHeightFn){t.next=33;break}if(a=this.getItemHeightFn(e),this._itemHeights[e]===a){t.next=31;break}return this.updateItemHeight(e,a),t.abrupt("return");case 31:t.next=37;break;case 33:if(c=(null==(u=r.getComponent(y))?void 0:u.height)||100,!(Math.abs(this._itemHeights[e]-c)>1)){t.next=37;break}return this.updateItemHeight(e,c),t.abrupt("return");case 37:p=r.getComponent(y),_=null!=(n=null==p?void 0:p.anchorY)?n:.5,f=this._itemHeights[e],m=this._prefixY[e],d=-(m+f*(1-_)),r.setPosition(0,this.pixelAlign?Math.round(d):d),this._needAnimateIndices.has(e)&&(this.playItemAppearAnimationFn?this.playItemAppearAnimationFn(r,e):this._playDefaultItemAppearAnimation(r,e),this._needAnimateIndices.delete(e)),t.next=68;break;case 48:if(i){t.next=50;break}return t.abrupt("return");case 50:i.active=!0,b=this.itemHeight+this.spacing,v=Math.floor(e/this.columns),x=e%this.columns,H=i.getComponent(y),w=null!=(g=null==H?void 0:H.anchorY)?g:.5,C=v*b,V=this.itemHeight*(1-w),I=-(C+V),S=this.columns*this.itemWidth+(this.columns-1)*this.columnSpacing,T=x*(this.itemWidth+this.columnSpacing)-S/2+this.itemWidth/2,i.setPosition(this.pixelAlign?Math.round(T):T,this.pixelAlign?Math.round(I):I),(M=i.getComponent(y))&&(M.width=this.itemWidth,M.height=this.itemHeight),this._updateItemClickHandler(i,e),this.renderItemFn&&this.renderItemFn(i,e),this._needAnimateIndices.has(e)&&(this.playItemAppearAnimationFn?this.playItemAppearAnimationFn(i,e):this._playDefaultItemAppearAnimation(i,e),this._needAnimateIndices.delete(e));case 68:case"end":return t.stop()}}),t,this)})));return function(i,e,s){return t.apply(this,arguments)}}(),a._playDefaultItemAppearAnimation=function(t,i){},a._updateItemClickHandler=function(t,i){var e=this;if(this.useVirtualList){var s=t.getComponent(w);s||(s=t.addComponent(w)),this._initSortLayerFlag?s.onSortLayer():s.offSortLayer(),s.useItemClickEffect=!!this.onItemClickFn,s.onClickCallback||(s.onClickCallback=function(i){e.onItemClickFn&&e.onItemClickFn(t,i)}),s.setDataIndex(i)}},a._layoutSlots=function(t,i){if(this.useVirtualList)for(var e=0;e<this._slots;e++){var s=t+e,n=this._slotNodes[e];s>=this.totalCount?n&&(n.active=!1):this._layoutSingleSlot(n,s,e)}},a._recomputeContentHeight=function(){if(!this.useVirtualList)return this._contentH=this._contentTf.height,this._boundsMin=0,void(this._boundsMax=Math.max(0,this._contentH-this._viewportH));if(!this.useDynamicHeight){var t=this.itemHeight+this.spacing,i=Math.ceil(this.totalCount/this.columns);this._contentH=i>0?i*t-this.spacing:0,this._contentTf.height=Math.max(this._contentH,this._viewportH),this._boundsMin=0,this._boundsMax=Math.max(0,this._contentH-this._viewportH)}},a._setContentY=function(t){if(Number.isFinite(t)){var i=this.content.position;this.pixelAlign&&(t=Math.round(t)),t!==i.y&&this.content.setPosition(i.x,t,i.z)}},h(i,[{key:"_contentTf",get:function(){return this.content=this._getContentNode(),this.content.getComponent(y)}},{key:"_viewportTf",get:function(){return this.node.getComponent(y)}}]),i}(v)).prototype,"content",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=i(R.prototype,"useVirtualList",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),q=i(R.prototype,"itemPrefab",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=i(R.prototype,"useDynamicHeight",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Q=i(R.prototype,"itemPrefabs",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),X=i(R.prototype,"columns",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Z=i(R.prototype,"columnSpacing",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 8}}),$=i(R.prototype,"spacing",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 8}}),tt=i(R.prototype,"totalCount",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),it=i(R.prototype,"buffer",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),et=i(R.prototype,"pixelAlign",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),st=i(R.prototype,"inertiaDampK",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),nt=i(R.prototype,"springK",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 150}}),ot=i(R.prototype,"springC",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 26}}),ht=i(R.prototype,"velocitySnap",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),rt=i(R.prototype,"velocityWindow",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.08}}),lt=i(R.prototype,"maxVelocity",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 6e3}}),at=i(R.prototype,"useIOSDecelerationCurve",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),W=R))||W)||W));a._RF.pop()}}}));

System.register("chunks:///_virtual/VScrollView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./VScrollViewItem.ts"],(function(t){var i,e,s,n,o,r,a,h,l,u,c,_,p,f,d,m,S,g,b,v,y,z,x,w;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,s=t.initializerDefineProperty,n=t.assertThisInitialized,o=t.createForOfIteratorHelperLoose,r=t.createClass,a=t.asyncToGenerator,h=t.regeneratorRuntime},function(t){l=t.cclegacy,u=t._decorator,c=t.Node,_=t.Enum,p=t.Prefab,f=t.Vec2,d=t.input,m=t.Input,S=t.math,g=t.Vec3,b=t.tween,v=t.Component,y=t.UITransform,z=t.Mask,x=t.instantiate},function(t){w=t.VScrollViewItem}],execute:function(){var M,V,C,T,I,P,F,N,D,A,L,k,H,E,O,U,R,K,G,B,W,X,Y,Z,j,q,J,Q,$,tt,it,et,st,nt,ot,rt,at,ht,lt,ut,ct,_t,pt,ft;l._RF.push({},"544earF5qRLB4JTuTnSr11+","VScrollView",void 0);var dt=u.ccclass,mt=u.property,St=u.menu,gt=function(){function t(t){var i=this;this.pools=new Map,this.prefabs=[],this.prefabs=t,t.forEach((function(t,e){i.pools.set(e,[])}))}var i=t.prototype;return i.get=function(t){var i=this.pools.get(t);if(!i)return console.error("[VScrollView NodePool] ç±»å‹ "+t+" ä¸å­˜åœ¨"),null;if(i.length>0){var e=i.pop();return e.active=!0,e}return x(this.prefabs[t])},i.put=function(t,i){if(t){var e=this.pools.get(i);if(!e)return console.error("[VScrollView NodePool] ç±»å‹ "+i+" ä¸å­˜åœ¨"),void t.destroy();t.active=!1,t.removeFromParent(),e.push(t)}},i.clear=function(){this.pools.forEach((function(t){t.forEach((function(t){return t.destroy()})),t.length=0})),this.pools.clear()},i.getStats=function(){var t={};return this.pools.forEach((function(i,e){t["type"+e]=i.length})),t},t}(),bt=t("ScrollDirection",function(t){return t[t.VERTICAL=0]="VERTICAL",t[t.HORIZONTAL=1]="HORIZONTAL",t}({}));t("VirtualScrollView",(M=dt("VirtualScrollView"),V=St("2D/VirtualScrollView(è™šæ‹Ÿæ»šåŠ¨åˆ—è¡¨)"),C=mt({type:c,displayName:"å®¹å™¨èŠ‚ç‚¹",tooltip:"content å®¹å™¨èŠ‚ç‚¹ï¼ˆåœ¨ Viewport ä¸‹ï¼‰"}),T=mt({displayName:"å¯ç”¨è™šæ‹Ÿåˆ—è¡¨",tooltip:"æ˜¯å¦å¯ç”¨è™šæ‹Ÿåˆ—è¡¨æ¨¡å¼ï¼ˆå…³é—­åˆ™ä»…æä¾›æ»šåŠ¨åŠŸèƒ½ï¼‰"}),I=mt({type:_(bt),displayName:"æ»šåŠ¨æ–¹å‘",tooltip:"æ»šåŠ¨æ–¹å‘ï¼šçºµå‘ï¼ˆå‘ä¸Šï¼‰æˆ–æ¨ªå‘ï¼ˆå‘å·¦ï¼‰"}),P=mt({type:p,displayName:"å­é¡¹é¢„åˆ¶ä½“",tooltip:"å¯é€‰ï¼šä» Prefab åˆ›å»º itemï¼ˆç­‰å¤§å°æ¨¡å¼ï¼‰",visible:function(){return this.useVirtualList&&!this.useDynamicSize}}),F=mt({displayName:"ä¸ç­‰å¤§å°æ¨¡å¼",tooltip:"å¯ç”¨ä¸ç­‰å¤§å°æ¨¡å¼",visible:function(){return this.useVirtualList}}),N=mt({displayName:"ä¸ç­‰é«˜æ¨¡å¼ï¼ˆå·²åºŸå¼ƒ,ä»…ä¿æŒå…¼å®¹ï¼‰",tooltip:"å¯ç”¨ä¸ç­‰é«˜æ¨¡å¼ï¼ˆå·²åºŸå¼ƒ,ä»…ä¿æŒå…¼å®¹ï¼‰"}),D=mt({type:[p],displayName:"å­é¡¹é¢„åˆ¶ä½“æ•°ç»„",tooltip:"ä¸ç­‰å¤§å°æ¨¡å¼ï¼šé¢„å…ˆæä¾›çš„å­é¡¹é¢„åˆ¶ä½“æ•°ç»„ï¼ˆå¯åœ¨ç¼–è¾‘å™¨æ‹–å…¥ï¼‰",visible:function(){return this.useVirtualList&&this.useDynamicSize}}),A=mt({displayName:"è¡Œ/åˆ—æ•°",tooltip:"çºµå‘æ¨¡å¼ä¸ºåˆ—æ•°ï¼Œæ¨ªå‘æ¨¡å¼ä¸ºè¡Œæ•°",range:[1,10,1],visible:function(){return this.useVirtualList&&!this.useDynamicSize}}),L=mt({displayName:"å‰¯æ–¹å‘é—´è·",tooltip:"ä¸»æ–¹å‘å‚ç›´æ–¹å‘çš„é—´è·ï¼ˆåƒç´ ï¼‰",range:[0,1e3,1],visible:function(){return this.useVirtualList&&!this.useDynamicSize}}),k=mt({displayName:"ä¸»æ–¹å‘é—´è·",tooltip:"ä¸»æ–¹å‘çš„é—´è·ï¼ˆåƒç´ ï¼‰",range:[0,1e3,1],visible:function(){return this.useVirtualList}}),H=mt({displayName:"æ€»æ¡æ•°",tooltip:"æ€»æ¡æ•°ï¼ˆå¯åœ¨è¿è¡Œæ—¶ setTotalCount åŠ¨æ€ä¿®æ”¹ï¼‰",range:[0,1e3,1],visible:function(){return this.useVirtualList}}),E=mt({displayName:"é¢å¤–ç¼“å†²",tooltip:"é¢å¤–ç¼“å†²ï¼ˆå¯è§†åŒºå¤–å¤šæ¸²æŸ“å‡ æ¡ï¼Œé¿å…è¾¹ç¼˜å¤ç”¨é—ªçƒï¼‰",range:[0,10,1],visible:function(){return this.useVirtualList}}),O=mt({displayName:"åƒç´ å¯¹é½",tooltip:"æ˜¯å¦å¯ç”¨åƒç´ å¯¹é½"}),U=mt({displayName:"æƒ¯æ€§é˜»å°¼ç³»æ•°",tooltip:"æŒ‡æ•°è¡°å‡ç³»æ•°ï¼Œè¶Šå¤§å‡é€Ÿè¶Šå¿«",range:[0,10,.5]}),R=mt({displayName:"å¼¹ç°§åˆšåº¦",tooltip:"è¶Šç•Œå¼¹ç°§åˆšåº¦ Kï¼ˆå»ºè®® 120â€“240ï¼‰"}),K=mt({displayName:"å¼¹ç°§é˜»å°¼",tooltip:"è¶Šç•Œé˜»å°¼ Cï¼ˆå»ºè®® 22â€“32ï¼‰"}),G=mt({displayName:"é€Ÿåº¦é˜ˆå€¼",tooltip:"é€Ÿåº¦é˜ˆå€¼ï¼ˆåƒç´ /ç§’ï¼‰ï¼Œä½äºå³åœæ­¢"}),B=mt({displayName:"é€Ÿåº¦çª—å£",tooltip:"é€Ÿåº¦ä¼°è®¡çª—å£ï¼ˆç§’ï¼‰"}),W=mt({displayName:"æœ€å¤§æƒ¯æ€§é€Ÿåº¦",tooltip:"æœ€å¤§æƒ¯æ€§é€Ÿåº¦ï¼ˆåƒç´ /ç§’ï¼‰"}),X=mt({displayName:"iOSå‡é€Ÿæ›²çº¿",tooltip:"æ˜¯å¦ä½¿ç”¨ iOS é£æ ¼çš„å‡é€Ÿæ›²çº¿"}),M(Y=V((j=i((Z=function(t){function i(){for(var i,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return i=t.call.apply(t,[this].concat(o))||this,s(i,"content",j,n(i)),s(i,"useVirtualList",q,n(i)),s(i,"direction",J,n(i)),s(i,"itemPrefab",Q,n(i)),s(i,"useDynamicSize",$,n(i)),s(i,"useDynamicHeight",tt,n(i)),s(i,"itemPrefabs",it,n(i)),i.itemMainSize=100,i.itemCrossSize=100,s(i,"gridCount",et,n(i)),s(i,"gridSpacing",st,n(i)),s(i,"spacing",nt,n(i)),s(i,"totalCount",ot,n(i)),s(i,"buffer",rt,n(i)),s(i,"pixelAlign",at,n(i)),s(i,"inertiaDampK",ht,n(i)),s(i,"springK",lt,n(i)),s(i,"springC",ut,n(i)),s(i,"velocitySnap",ct,n(i)),s(i,"velocityWindow",_t,n(i)),s(i,"maxVelocity",pt,n(i)),s(i,"useIOSDecelerationCurve",ft,n(i)),i.renderItemFn=null,i.provideNodeFn=null,i.onItemClickFn=null,i.playItemAppearAnimationFn=null,i.getItemHeightFn=null,i.getItemTypeIndexFn=null,i._viewportSize=0,i._contentSize=0,i._boundsMin=0,i._boundsMax=0,i._velocity=0,i._isTouching=!1,i._velSamples=[],i._slotNodes=[],i._slots=0,i._slotFirstIndex=0,i._itemSizes=[],i._prefixPositions=[],i._prefabSizeCache=new Map,i._nodePool=null,i._slotPrefabIndices=[],i._needAnimateIndices=new Set,i._initSortLayerFlag=!0,i._scrollTween=null,i._tmpMoveVec2=new f,i}e(i,t);var l=i.prototype;return l._getContentNode=function(){return this.content||(console.warn("[VirtualScrollView] :"+this.node.name+" è¯·åœ¨å±æ€§é¢æ¿ç»‘å®š content å®¹å™¨èŠ‚ç‚¹"),this.content=this.node.getChildByName("content")),this.content},l._isVertical=function(){return this.direction===bt.VERTICAL},l._getViewportMainSize=function(){return this._isVertical()?this._viewportTf.height:this._viewportTf.width},l._getContentMainPos=function(){return this._isVertical()?this.content.position.y:this.content.position.x},l._setContentMainPos=function(t){if(Number.isFinite(t)){this.pixelAlign&&(t=Math.round(t));var i=this.content.position;if(this._isVertical()){if(t===i.y)return;this.content.setPosition(i.x,t,i.z)}else{if(t===i.x)return;this.content.setPosition(t,i.y,i.z)}}},l.start=function(){var t=a(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.content=this._getContentNode(),this.content){t.next=3;break}return t.abrupt("return");case 3:if(this.node.getComponent(z)||console.warn("[VirtualScrollView] å»ºè®®åœ¨è§†çª—èŠ‚ç‚¹æŒ‚ä¸€ä¸ª Mask ç»„ä»¶ç”¨äºè£å‰ª"),this.gridCount=Math.max(1,Math.round(this.gridCount)),this.useVirtualList){t.next=13;break}return this._viewportSize=this._getViewportMainSize(),this._contentSize=this._isVertical()?this._contentTf.height:this._contentTf.width,this._isVertical()?(this._boundsMin=0,this._boundsMax=Math.max(0,this._contentSize-this._viewportSize)):(this._boundsMin=-Math.max(0,this._contentSize-this._viewportSize),this._boundsMax=0),this._bindTouch(),this._bindGlobalTouch(),t.abrupt("return");case 13:if(this.content.removeAllChildren(),this._viewportSize=this._getViewportMainSize(),this.useDynamicHeight&&(this.useDynamicSize=!0),!this.useDynamicSize){t.next=21;break}return t.next=19,this._initDynamicSizeMode();case 19:t.next=23;break;case 21:return t.next=23,this._initFixedSizeMode();case 23:this._bindTouch(),this._bindGlobalTouch();case 25:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),l.onDestroy=function(){d.off(m.EventType.TOUCH_END,this._onGlobalTouchEnd,this),d.off(m.EventType.TOUCH_CANCEL,this._onGlobalTouchEnd,this),this.node.off(c.EventType.TOUCH_START,this._onDown,this),this.node.off(c.EventType.TOUCH_MOVE,this._onMove,this),this.node.off(c.EventType.TOUCH_END,this._onUp,this),this.node.off(c.EventType.TOUCH_CANCEL,this._onUp,this),this._nodePool&&(this._nodePool.clear(),this._nodePool=null)},l._bindTouch=function(){this.node.on(c.EventType.TOUCH_START,this._onDown,this),this.node.on(c.EventType.TOUCH_MOVE,this._onMove,this),this.node.on(c.EventType.TOUCH_END,this._onUp,this),this.node.on(c.EventType.TOUCH_CANCEL,this._onUp,this)},l._bindGlobalTouch=function(){d.on(m.EventType.TOUCH_END,this._onGlobalTouchEnd,this),d.on(m.EventType.TOUCH_CANCEL,this._onGlobalTouchEnd,this)},l._onGlobalTouchEnd=function(t){this._isTouching&&(console.log("[VScrollView] Global touch end detected"),this._onUp(t))},l._initFixedSizeMode=function(){var t=a(h().mark((function t(){var i,e,s,n,o,r,a,l=this;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.provideNodeFn||(this.provideNodeFn=function(t){if(l.itemPrefab)return x(l.itemPrefab);console.warn("[VirtualScrollView] æ²¡æœ‰æä¾› itemPrefab");var i=new c("item-auto-create"),e=l._isVertical()?l._viewportTf.width:l._viewportTf.height;return i.addComponent(y).setContentSize(l._isVertical()?e:l.itemMainSize,l._isVertical()?l.itemMainSize:e),i}),!((i=this.provideNodeFn(0))instanceof Promise)){t.next=6;break}return t.next=5,i;case 5:i=t.sent;case 6:for(e=i.getComponent(y),this._isVertical()?(this.itemMainSize=e.height,this.itemCrossSize=e.width):(this.itemMainSize=e.width,this.itemCrossSize=e.height),this._recomputeContentSize(),s=this.itemMainSize+this.spacing,n=Math.ceil(this._viewportSize/s),this._slots=Math.max(1,(n+this.buffer+2)*this.gridCount),o=0;o<this._slots;o++)(r=x(i)).parent=this.content,(a=r.getComponent(y))&&(this._isVertical()?(a.width=this.itemCrossSize,a.height=this.itemMainSize):(a.width=this.itemMainSize,a.height=this.itemCrossSize)),this._slotNodes.push(r);this._slotFirstIndex=0,this._layoutSlots(this._slotFirstIndex,!0);case 15:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),l._initDynamicSizeMode=function(){var t=a(h().mark((function t(){var i,e,s,n,o,r,a,l;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.getItemHeightFn){t.next=14;break}for(console.log("[VirtualScrollView] ä½¿ç”¨å¤–éƒ¨æä¾›çš„ getItemHeightFn"),this._itemSizes=[],i=0;i<this.totalCount;i++)this._itemSizes.push(this.getItemHeightFn(i));if(this._buildPrefixSum(),!(this.itemPrefabs.length>0)){t.next=10;break}console.log("[VirtualScrollView] åˆå§‹åŒ–èŠ‚ç‚¹æ± "),this._nodePool=new gt(this.itemPrefabs),t.next=12;break;case 10:return console.error("[VirtualScrollView] éœ€è¦è‡³å°‘ä¸€ä¸ª itemPrefab"),t.abrupt("return");case 12:return this._initDynamicSlots(),t.abrupt("return");case 14:if(0!==this.itemPrefabs.length&&this.getItemTypeIndexFn){t.next=17;break}return console.error("[VirtualScrollView] ä¸ç­‰å¤§å°æ¨¡å¼å¿…é¡»æä¾›ä»¥ä¸‹ä¹‹ä¸€ï¼š\n1. getItemHeightFn å›è°ƒå‡½æ•°\n2. itemPrefabs æ•°ç»„ + getItemTypeIndexFn å›è°ƒå‡½æ•°"),t.abrupt("return");case 17:for(console.log("[VirtualScrollView] ä½¿ç”¨é‡‡æ ·æ¨¡å¼ï¼ˆä» itemPrefabs é‡‡æ ·å°ºå¯¸ï¼‰"),this._nodePool=new gt(this.itemPrefabs),this._prefabSizeCache.clear(),e=0;e<this.itemPrefabs.length;e++)s=x(this.itemPrefabs[e]),n=s.getComponent(y),o=this._isVertical()?(null==n?void 0:n.height)||100:(null==n?void 0:n.width)||100,this._prefabSizeCache.set(e,o),s.destroy(),console.log("[VirtualScrollView] é¢„åˆ¶ä½“["+e+"] é‡‡æ ·å°ºå¯¸: "+o);for(this._itemSizes=[],r=0;r<this.totalCount;r++)a=this.getItemTypeIndexFn(r),void 0!==(l=this._prefabSizeCache.get(a))?this._itemSizes.push(l):(console.warn("[VirtualScrollView] ç´¢å¼• "+r+" çš„ç±»å‹ç´¢å¼• "+a+" æ— æ•ˆï¼Œä½¿ç”¨é»˜è®¤å°ºå¯¸"),this._itemSizes.push(this._prefabSizeCache.get(0)||100));this._buildPrefixSum(),this._initDynamicSlots();case 25:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),l._initDynamicSlots=function(){var t=this._contentSize/this.totalCount||100,i=Math.ceil(this._viewportSize/t)+2*this.buffer+4,e=Math.ceil(this._viewportSize/80)+2*this.buffer;i=Math.max(i,e);var s=Math.ceil(this._viewportSize/50)+4*this.buffer;i=Math.min(i,s),this._slots=Math.min(i,Math.max(this.totalCount,e)),this._slotNodes=new Array(this._slots).fill(null),this._slotPrefabIndices=new Array(this._slots).fill(-1),this._slotFirstIndex=0,this._layoutSlots(this._slotFirstIndex,!0),console.log("[VScrollView] åˆå§‹åŒ–æ§½ä½: "+this._slots+" (æ€»æ•°æ®: "+this.totalCount+", è§†å£å°ºå¯¸: "+this._viewportSize+")")},l._buildPrefixSum=function(){var t=this._itemSizes.length;this._prefixPositions=new Array(t);for(var i=0,e=0;e<t;e++)this._prefixPositions[e]=i,i+=this._itemSizes[e]+this.spacing;this._contentSize=i-this.spacing,this._contentSize<0&&(this._contentSize=0),this._isVertical()?this._contentTf.height=Math.max(this._contentSize,this._viewportSize):this._contentTf.width=Math.max(this._contentSize,this._viewportSize),this._isVertical()?(this._boundsMin=0,this._boundsMax=Math.max(0,this._contentSize-this._viewportSize)):(this._boundsMin=-Math.max(0,this._contentSize-this._viewportSize),this._boundsMax=0)},l._posToFirstIndex=function(t){if(t<=0)return 0;for(var i=0,e=this._prefixPositions.length-1,s=this._prefixPositions.length;i<=e;){var n=i+e>>1;this._prefixPositions[n]>t?(s=n,e=n-1):i=n+1}return Math.max(0,s-1)},l._calcVisibleRange=function(t){var i=this._prefixPositions.length;if(0===i)return{start:0,end:0};for(var e=this._posToFirstIndex(t),s=t+this._viewportSize,n=e;n<i&&!(this._prefixPositions[n]>=s);)n++;return{start:Math.max(0,e-this.buffer),end:Math.min(i,n+this.buffer)}},l.update=function(t){if(this.content&&!this._isTouching&&!this._scrollTween){var i=this._getContentMainPos(),e=0,s=Math.min(this._boundsMin,this._boundsMax),n=Math.max(this._boundsMin,this._boundsMax);if(i<s)e=-this.springK*(i-s)-this.springC*this._velocity;else if(i>n)e=-this.springK*(i-n)-this.springC*this._velocity;else if(this.useIOSDecelerationCurve){var o=Math.abs(this._velocity);this._velocity*=o>2e3?Math.exp(.7*-this.inertiaDampK*t):o>500?Math.exp(-this.inertiaDampK*t):Math.exp(1.3*-this.inertiaDampK*t)}else this._velocity*=Math.exp(-this.inertiaDampK*t);this._velocity+=e*t,Math.abs(this._velocity)<this.velocitySnap&&0===e&&(this._velocity=0),0!==this._velocity&&(i+=this._velocity*t,this.pixelAlign&&(i=Math.round(i)),this._setContentMainPos(i),this.useVirtualList&&this._updateVisible(!1))}},l.updateItemHeight=function(t,i){if(this.useDynamicSize)if(t<0||t>=this.totalCount)console.warn("[VScrollView] ç´¢å¼• "+t+" è¶…å‡ºèŒƒå›´");else{var e=i;if(void 0===e){if(!this.getItemHeightFn)return void console.error("[VScrollView] æ²¡æœ‰æä¾› newSize å‚æ•°ï¼Œä¸”æœªè®¾ç½® getItemHeightFn");e=this.getItemHeightFn(t)}this._itemSizes[t]!==e&&(this._itemSizes[t]=e,this._rebuildPrefixSumFrom(t),this._updateVisible(!0))}else console.warn("[VScrollView] åªæœ‰ä¸ç­‰å¤§å°æ¨¡å¼æ”¯æŒ updateItemHeight")},l._rebuildPrefixSumFrom=function(t){if(0!==t){for(var i=this._prefixPositions[t-1]+this._itemSizes[t-1]+this.spacing,e=t;e<this._itemSizes.length;e++)this._prefixPositions[e]=i,i+=this._itemSizes[e]+this.spacing;this._contentSize=i-this.spacing,this._contentSize<0&&(this._contentSize=0),this._isVertical()?this._contentTf.height=Math.max(this._contentSize,this._viewportSize):this._contentTf.width=Math.max(this._contentSize,this._viewportSize),this._isVertical()?(this._boundsMin=0,this._boundsMax=Math.max(0,this._contentSize-this._viewportSize)):(this._boundsMin=-Math.max(0,this._contentSize-this._viewportSize),this._boundsMax=0)}else this._buildPrefixSum()},l.updateItemHeights=function(t){if(this.useDynamicSize){if(0!==t.length){for(var i,e=this.totalCount,s=!1,n=o(t);!(i=n()).done;){var r=i.value,a=r.index,h=r.height;a<0||a>=this.totalCount||this._itemSizes[a]!==h&&(this._itemSizes[a]=h,e=Math.min(e,a),s=!0)}s&&(this._rebuildPrefixSumFrom(e),this._updateVisible(!0))}}else console.warn("[VScrollView] åªæœ‰ä¸ç­‰å¤§å°æ¨¡å¼æ”¯æŒ updateItemHeights")},l.refreshList=function(t){this.useVirtualList?"number"==typeof t?this.setTotalCount(t):this.setTotalCount(t.length):console.warn("[VirtualScrollView] ç®€å•æ»šåŠ¨æ¨¡å¼ä¸æ”¯æŒ refreshList")},l.setTotalCount=function(t){if(this._getContentNode(),this.useVirtualList){var i=this.totalCount;if(this.totalCount=Math.max(0,0|t),this.totalCount>i)for(var e=i;e<this.totalCount;e++)this._needAnimateIndices.add(e);if(this.useDynamicSize){var s=this._itemSizes.length;if(this.totalCount>s)for(var n=s;n<this.totalCount;n++){var o=100;if(this.getItemHeightFn)o=this.getItemHeightFn(n);else if(this.getItemTypeIndexFn&&this._prefabSizeCache.size>0){var r=this.getItemTypeIndexFn(n);o=this._prefabSizeCache.get(r)||100}this._itemSizes.push(o)}else this.totalCount<s&&(this._itemSizes.length=this.totalCount);this._buildPrefixSum(),this.totalCount>i&&this._expandSlotsIfNeeded()}else this._recomputeContentSize();this._slotFirstIndex=S.clamp(this._slotFirstIndex,0,Math.max(0,this.totalCount-1)),this._layoutSlots(this._slotFirstIndex,!0),this._updateVisible(!0)}else console.warn("[VScrollView] éè™šæ‹Ÿåˆ—è¡¨æ¨¡å¼ï¼Œä¸æ”¯æŒ setTotalCount")},l._expandSlotsIfNeeded=function(){for(var t=0,i=0,e=this._viewportSize,s=0;s<this.totalCount&&!(i>=e);s++)t++,i+=this._itemSizes[s]+this.spacing;t+=2*this.buffer+4;var n=Math.ceil(this._viewportSize/80)+2*this.buffer;t=Math.max(t,n);var o=Math.ceil(this._viewportSize/50)+4*this.buffer;if((t=Math.min(t,o))>this._slots){var r=this._slots;this._slots=t;for(var a=r;a<this._slots;a++)this._slotNodes.push(null),this._slotPrefabIndices.push(-1);console.log("[VScrollView] æ§½ä½æ‰©å±•: "+r+" -> "+this._slots+" (æ€»æ•°æ®: "+this.totalCount+")")}},l._scrollToPosition=function(t,i){var e=this;if(void 0===i&&(i=!1),t=S.clamp(t,this._boundsMin,this._boundsMax),this._scrollTween&&(this._scrollTween.stop(),this._scrollTween=null),this._velocity=0,this._isTouching=!1,this._velSamples.length=0,i){var s=this._getContentMainPos(),n=Math.abs(t-s),o=Math.max(.2,n/3e3),r=this._isVertical()?new g(0,t,0):new g(t,0,0);this._scrollTween=b(this.content).to(o,{position:r},{easing:"smooth",onUpdate:function(){e._updateVisible(!1)}}).call((function(){e._updateVisible(!0),e._scrollTween=null,e._velocity=0})).start()}else this._setContentMainPos(this.pixelAlign?Math.round(t):t),this._updateVisible(!0)},l.scrollToTop=function(t){void 0===t&&(t=!1);var i=this._isVertical()?this._boundsMin:this._boundsMax;this._scrollToPosition(i,t)},l.scrollToBottom=function(t){void 0===t&&(t=!1);var i=this._isVertical()?this._boundsMax:this._boundsMin;this._scrollToPosition(i,t)},l.scrollToIndex=function(t,i){void 0===i&&(i=!1),t=S.clamp(0|t,0,Math.max(0,this.totalCount-1));var e=0;this.useDynamicSize?e=this._prefixPositions[t]||0:e=Math.floor(t/this.gridCount)*(this.itemMainSize+this.spacing);this._isVertical()||(e=-e),this._scrollToPosition(e,i)},l.onOffSortLayer=function(t){this._initSortLayerFlag=t,this._onOffSortLayerOperation()},l._onOffSortLayerOperation=function(){for(var t,i=o(this._slotNodes);!(t=i()).done;){var e=t.value,s=null==e?void 0:e.getComponent(w);s&&(this._initSortLayerFlag?s.onSortLayer():s.offSortLayer())}},l._flashToPosition=function(t){t=S.clamp(t,this._boundsMin,this._boundsMax),this._scrollTween&&(this._scrollTween.stop(),this._scrollTween=null),this._velocity=0,this._isTouching=!1,this._velSamples.length=0,this._setContentMainPos(this.pixelAlign?Math.round(t):t),this._updateVisible(!0)},l.flashToTop=function(){var t=this._isVertical()?this._boundsMin:this._boundsMax;this._flashToPosition(t)},l.flashToBottom=function(){var t=this._isVertical()?this._boundsMax:this._boundsMin;this._flashToPosition(t)},l.flashToIndex=function(t){if(this.useVirtualList){t=S.clamp(0|t,0,Math.max(0,this.totalCount-1));var i=0;if(this.useDynamicSize)i=this._prefixPositions[t]||0;else i=Math.floor(t/this.gridCount)*(this.itemMainSize+this.spacing);this._isVertical()||(i=-i),this._flashToPosition(i)}else console.warn("[VirtualScrollView] ç®€å•æ»šåŠ¨æ¨¡å¼ä¸æ”¯æŒ flashToIndex")},l.refreshIndex=function(t){if(this.useVirtualList){var i=this._slotFirstIndex,e=i+this._slots-1;if(!(t<i||t>e)){var s=t-i,n=this._slotNodes[s];n&&this.renderItemFn&&this.renderItemFn(n,t)}}else console.warn("[VirtualScrollView] ç®€å•æ»šåŠ¨æ¨¡å¼ä¸æ”¯æŒ refreshIndex")},l._onDown=function(t){this._isTouching=!0,this._velocity=0,this._velSamples.length=0,this._scrollTween&&(this._scrollTween.stop(),this._scrollTween=null)},l._onMove=function(t){if(this._isTouching){var i=t.getUIDelta(this._tmpMoveVec2),e=this._isVertical()?i.y:i.x,s=this._getContentMainPos()+e;this.pixelAlign&&(s=Math.round(s)),this._setContentMainPos(s);var n=performance.now()/1e3;this._velSamples.push({t:n,delta:e});for(var o=n-this.velocityWindow;this._velSamples.length&&this._velSamples[0].t<o;)this._velSamples.shift();this.useVirtualList&&this._updateVisible(!1)}},l._onUp=function(t){if(this._isTouching){if(this._isTouching=!1,this._velSamples.length>=2){for(var i=0,e=0,s=Math.min(this._velSamples.length,5),n=this._velSamples.length-s+1;n<this._velSamples.length;n++)i+=this._velSamples[n].delta,e+=this._velSamples[n].t-this._velSamples[n-1].t;e>.001?(this._velocity=i/e,this._velocity=S.clamp(this._velocity,-this.maxVelocity,this.maxVelocity)):this._velocity=this._velSamples.length>0?S.clamp(60*this._velSamples[this._velSamples.length-1].delta,-this.maxVelocity,this.maxVelocity):0}else 1===this._velSamples.length?this._velocity=S.clamp(60*this._velSamples[0].delta,-this.maxVelocity,this.maxVelocity):this._velocity=0;this._velSamples.length=0}},l._updateVisible=function(t){if(this.useVirtualList){var i,e=this._getContentMainPos();i=this._isVertical()?S.clamp(e,0,this._contentSize):S.clamp(-e,0,this._contentSize);var s=0;if(this.useDynamicSize){s=this._calcVisibleRange(i).start}else{var n=this.itemMainSize+this.spacing,o=Math.floor(i/n)*this.gridCount;s=S.clamp(o,0,Math.max(0,this.totalCount-1))}if(this.totalCount<this._slots&&(s=0),t)return this._slotFirstIndex=s,void this._layoutSlots(this._slotFirstIndex,!0);var r=s-this._slotFirstIndex;if(0!==r){if(Math.abs(r)>=this._slots)return this._slotFirstIndex=s,void this._layoutSlots(this._slotFirstIndex,!0);var a=Math.abs(r);if(r>0){var h,l=this._slotNodes.splice(0,a);if((h=this._slotNodes).push.apply(h,l),this.useDynamicSize&&this._slotPrefabIndices.length>0){var u,c=this._slotPrefabIndices.splice(0,a);(u=this._slotPrefabIndices).push.apply(u,c)}this._slotFirstIndex=s;for(var _=0;_<a;_++){var p=this._slots-a+_,f=this._slotFirstIndex+p;if(f>=this.totalCount){var d=this._slotNodes[p];d&&(d.active=!1)}else this._layoutSingleSlot(this._slotNodes[p],f,p)}}else{var m,g=this._slotNodes.splice(this._slotNodes.length+r,a);if((m=this._slotNodes).unshift.apply(m,g),this.useDynamicSize&&this._slotPrefabIndices.length>0){var b,v=this._slotPrefabIndices.splice(this._slotPrefabIndices.length+r,a);(b=this._slotPrefabIndices).unshift.apply(b,v)}this._slotFirstIndex=s;for(var y=0;y<a;y++){var z=this._slotFirstIndex+y;if(z>=this.totalCount){var x=this._slotNodes[y];x&&(x.active=!1)}else this._layoutSingleSlot(this._slotNodes[y],z,y)}}}}},l._layoutSingleSlot=function(){var t=a(h().mark((function t(i,e,s){var n,o,r,a,l,u,c,_,p,f,d,m,S,g,b,v,z,x,w,M,V,C,T,I,P,F,N,D,A,L,k,H;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.useVirtualList){t.next=2;break}return t.abrupt("return");case 2:if(!this.useDynamicSize){t.next=44;break}if(n=this.getItemTypeIndexFn(e),o=this._slotPrefabIndices[s],r=null,o!==n||!this._slotNodes[s]){t.next=10;break}r=this._slotNodes[s],t.next=19;break;case 10:if(this._slotNodes[s]&&this._nodePool&&o>=0&&this._nodePool.put(this._slotNodes[s],o),!this._nodePool){t.next=19;break}if(r=this._nodePool.get(n)){t.next=16;break}return console.error("[VScrollView] æ— æ³•è·å–ç±»å‹ "+n+" çš„èŠ‚ç‚¹"),t.abrupt("return");case 16:r.parent=this.content,this._slotNodes[s]=r,this._slotPrefabIndices[s]=n;case 19:if(r){t.next=22;break}return console.error("[VScrollView] æ§½ä½ "+s+" èŠ‚ç‚¹ä¸ºç©ºï¼Œç´¢å¼• "+e),t.abrupt("return");case 22:if(r.active=!0,this._updateItemClickHandler(r,e),this.renderItemFn&&this.renderItemFn(r,e),!this.getItemHeightFn){t.next=32;break}if(a=this.getItemHeightFn(e),this._itemSizes[e]===a){t.next=30;break}return this.updateItemHeight(e,a),t.abrupt("return");case 30:t.next=37;break;case 32:if(l=r.getComponent(y),u=this._isVertical()?(null==l?void 0:l.height)||100:(null==l?void 0:l.width)||100,!(Math.abs(this._itemSizes[e]-u)>1)){t.next=37;break}return this.updateItemHeight(e,u),t.abrupt("return");case 37:c=r.getComponent(y),_=this._itemSizes[e],p=this._prefixPositions[e],this._isVertical()?(d=null!=(f=null==c?void 0:c.anchorY)?f:.5,m=-(p+_*(1-d)),r.setPosition(0,this.pixelAlign?Math.round(m):m)):(g=null!=(S=null==c?void 0:c.anchorX)?S:.5,b=p+_*g,r.setPosition(this.pixelAlign?Math.round(b):b,0)),this._needAnimateIndices.has(e)&&(this.playItemAppearAnimationFn?this.playItemAppearAnimationFn(r,e):this._playDefaultItemAppearAnimation(r,e),this._needAnimateIndices.delete(e)),t.next=56;break;case 44:if(i){t.next=46;break}return t.abrupt("return");case 46:i.active=!0,v=this.itemMainSize+this.spacing,z=Math.floor(e/this.gridCount),x=e%this.gridCount,w=i.getComponent(y),M=z*v,this._isVertical()?(C=null!=(V=null==w?void 0:w.anchorY)?V:.5,T=this.itemMainSize*(1-C),I=-(M+T),P=this.gridCount*this.itemCrossSize+(this.gridCount-1)*this.gridSpacing,F=x*(this.itemCrossSize+this.gridSpacing)-P/2+this.itemCrossSize/2,i.setPosition(this.pixelAlign?Math.round(F):F,this.pixelAlign?Math.round(I):I),w&&(w.width=this.itemCrossSize,w.height=this.itemMainSize)):(D=null!=(N=null==w?void 0:w.anchorX)?N:.5,A=this.itemMainSize*D,L=M+A,k=this.gridCount*this.itemCrossSize+(this.gridCount-1)*this.gridSpacing,H=k/2-x*(this.itemCrossSize+this.gridSpacing)-this.itemCrossSize/2,i.setPosition(this.pixelAlign?Math.round(L):L,this.pixelAlign?Math.round(H):H),w&&(w.width=this.itemMainSize,w.height=this.itemCrossSize)),this._updateItemClickHandler(i,e),this.renderItemFn&&this.renderItemFn(i,e),this._needAnimateIndices.has(e)&&(this.playItemAppearAnimationFn?this.playItemAppearAnimationFn(i,e):this._playDefaultItemAppearAnimation(i,e),this._needAnimateIndices.delete(e));case 56:case"end":return t.stop()}}),t,this)})));return function(i,e,s){return t.apply(this,arguments)}}(),l._playDefaultItemAppearAnimation=function(t,i){},l._updateItemClickHandler=function(t,i){var e=this;if(this.useVirtualList){var s=t.getComponent(w);s||(s=t.addComponent(w)),this._initSortLayerFlag?s.onSortLayer():s.offSortLayer(),s.useItemClickEffect=!!this.onItemClickFn,s.onClickCallback||(s.onClickCallback=function(i){e.onItemClickFn&&e.onItemClickFn(t,i)}),s.setDataIndex(i)}},l._layoutSlots=function(t,i){if(this.useVirtualList)for(var e=0;e<this._slots;e++){var s=t+e,n=this._slotNodes[e];s>=this.totalCount?n&&(n.active=!1):this._layoutSingleSlot(n,s,e)}},l._recomputeContentSize=function(){if(!this.useVirtualList)return this._contentSize=this._isVertical()?this._contentTf.height:this._contentTf.width,void(this._isVertical()?(this._boundsMin=0,this._boundsMax=Math.max(0,this._contentSize-this._viewportSize)):(this._boundsMin=-Math.max(0,this._contentSize-this._viewportSize),this._boundsMax=0));if(!this.useDynamicSize){var t=this.itemMainSize+this.spacing,i=Math.ceil(this.totalCount/this.gridCount);this._contentSize=i>0?i*t-this.spacing:0,this._isVertical()?this._contentTf.height=Math.max(this._contentSize,this._viewportSize):this._contentTf.width=Math.max(this._contentSize,this._viewportSize),this._isVertical()?(this._boundsMin=0,this._boundsMax=Math.max(0,this._contentSize-this._viewportSize)):(this._boundsMin=-Math.max(0,this._contentSize-this._viewportSize),this._boundsMax=0)}},r(i,[{key:"_contentTf",get:function(){return this.content=this._getContentNode(),this.content.getComponent(y)}},{key:"_viewportTf",get:function(){return this.node.getComponent(y)}}]),i}(v)).prototype,"content",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=i(Z.prototype,"useVirtualList",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),J=i(Z.prototype,"direction",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return bt.VERTICAL}}),Q=i(Z.prototype,"itemPrefab",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=i(Z.prototype,"useDynamicSize",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),tt=i(Z.prototype,"useDynamicHeight",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),it=i(Z.prototype,"itemPrefabs",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),et=i(Z.prototype,"gridCount",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),st=i(Z.prototype,"gridSpacing",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 8}}),nt=i(Z.prototype,"spacing",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 8}}),ot=i(Z.prototype,"totalCount",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),rt=i(Z.prototype,"buffer",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),at=i(Z.prototype,"pixelAlign",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ht=i(Z.prototype,"inertiaDampK",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),lt=i(Z.prototype,"springK",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 150}}),ut=i(Z.prototype,"springC",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 26}}),ct=i(Z.prototype,"velocitySnap",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),_t=i(Z.prototype,"velocityWindow",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.08}}),pt=i(Z.prototype,"maxVelocity",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 6e3}}),ft=i(Z.prototype,"useIOSDecelerationCurve",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Y=Z))||Y)||Y));l._RF.pop()}}}));

System.register("chunks:///_virtual/VScrollViewItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,o,i,s,h,c,r,a;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,i=t.settings,s=t.Sorting2D,h=t.Node,c=t.Label,r=t.Vec2,a=t.Component}],execute:function(){var l;t("changeUISortingLayer",u),n._RF.push({},"e5a25hGMbRDDIUqUhge8Z+6","VScrollViewItem",void 0);var d=o.ccclass;function u(t,e,n){var o=i.querySettings("engine","sortingLayers");o&&0!==o.length||(o=[{id:0,value:0,name:"default"}]),o.find((function(t){return t.value===e}))||(console.warn("âŒæœªæ‰¾åˆ°å¯¹åº”çš„sortingLayer:"+e+"ï¼Œè¯·æ£€æŸ¥æ˜¯å¦å·²åœ¨é¡¹ç›®è®¾ç½®ä¸­é…ç½®è¯¥å±‚çº§ã€‚å°†ä½¿ç”¨é»˜è®¤å±‚çº§ä»£æ›¿ã€‚"),e=o[0].value);var h=t.getComponent(s)||t.addComponent(s);h&&(h.sortingLayer=e,void 0!==n&&(h.sortingOrder=n))}t("VScrollViewItem",d("VScrollViewItem")(l=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))||this).dataIndex=-1,e.useItemClickEffect=!0,e.onClickCallback=null,e._touchStartNode=null,e._isCanceled=!1,e._startPos=new r,e._moveThreshold=40,e._clickThreshold=10,e}e(n,t);var o=n.prototype;return o.onLoad=function(){this.node.on(h.EventType.TOUCH_START,this._onTouchStart,this),this.node.on(h.EventType.TOUCH_MOVE,this._onTouchMove,this),this.node.on(h.EventType.TOUCH_END,this._onTouchEnd,this),this.node.on(h.EventType.TOUCH_CANCEL,this._onTouchCancel,this)},o.start=function(){},o.onDestroy=function(){this.node.off(h.EventType.TOUCH_START,this._onTouchStart,this),this.node.off(h.EventType.TOUCH_MOVE,this._onTouchMove,this),this.node.off(h.EventType.TOUCH_END,this._onTouchEnd,this),this.node.off(h.EventType.TOUCH_CANCEL,this._onTouchCancel,this)},o.onSortLayer=function(){for(var t=1,e=this.node.getComponentsInChildren(c),n=0;n<e.length;n++)u(e[n].node,0,t),t++},o.offSortLayer=function(){for(var t=this.node.getComponentsInChildren(c),e=0;e<t.length;e++)u(t[e].node,0,0)},o.setDataIndex=function(t){this.dataIndex=t},o._onTouchStart=function(t){this._touchStartNode=this.node,this._isCanceled=!1,t.getLocation(this._startPos),this.useItemClickEffect&&this.node.children.length>0&&this.node.setScale(.95,.95)},o._onTouchMove=function(t){if(!this._isCanceled){var e=t.getLocation(),n=e.x-this._startPos.x,o=e.y-this._startPos.y;Math.sqrt(n*n+o*o)>this._moveThreshold&&(this._isCanceled=!0,this._restoreScale(),this._touchStartNode=null)}},o._onTouchEnd=function(t){if(this._isCanceled)this._reset();else{this._restoreScale();var e=t.getLocation(),n=e.x-this._startPos.x,o=e.y-this._startPos.y;Math.sqrt(n*n+o*o)<this._clickThreshold&&this._touchStartNode===this.node&&this.onClickCallback&&this.onClickCallback(this.dataIndex),this._reset()}},o._onTouchCancel=function(t){this._restoreScale(),this._reset()},o._restoreScale=function(){this.useItemClickEffect&&this.node.children.length>0&&this.node.setScale(1,1)},o._reset=function(){this._touchStartNode=null,this._isCanceled=!1},n}(a))||l);n._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});